接口文档
========

·无基本参数

·基本返回内容如下

·收发格式默认JSON

返回格式如下

```json
{

    “Err_No”: “0”,

    “Err_Msg”: “ok”

}
```

带数据

```json
{

    “Err_No”: “0”,

    “Err_Msg”: “ok”,

    “Data”: [{},],

    “Total_Numbers”：“”

}
```





**1.1 用户登录**
----------------

**URL**

/api/auth

**请求方法**

POST

**请求参数**

| 参数名       | 类型 | 是否必须 | 参数说明 |
|--------------|------|----------|----------|
| Usr_Name     | str  | 是       |          |
| Usr_Password | str  | 是       |          |

**返回参数**

| 参数名   | 类型 | 参数说明 |
|----------|------|----------|
| Usr_Name | str  | 用户名   |
| Usr_ID   | str  | 用户ID   |

**1.2 退出登录**
----------------

**URL**

/api/auth

**请求方法**

DELETE

**请求参数**

**返回参数**

1.3 用户注册
------------

**URL**

/api/users

**请求方法**

POST

**请求参数**

| 参数名       | 类型 | 是否必须 | 参数说明 |
| ------------ | ---- | -------- | -------- |
| Usr_Name     | str  | 是       | 登录名   |
| Usr_Password | str  | 是       | 用户密码 |
| Usr_Email    | str  | 是       | 用户邮箱 |

**返回参数**

1.4 修改用户信息
------------

**URL**

/api/users

**请求方法**

PUT

**请求参数**

| 参数名          | 类型 | 是否必须 | 参数说明     |
| --------------- | ---- | -------- | ------------ |
| id              | int  | 是       | 主键         |
| Usr_Name        | str  | 是       | 登录名       |
| Usr_Email       | str  | 是       | 用户邮箱     |
| Usr_Phone       | str  | 否       | 用户手机     |
| XCX_Title       | str  | 否       | 小程序标题   |
| Usr_Company     | str  | 否       | 用户公司     |
| Usr_Province    | str  | 否       | 所属省       |
| Usr_City        | str  | 否       | 所属市       |
| Usr_Detail_Addr | str  | 否       | 用户详细地址 |
| Usr_Area        | str  | 否       | 所属区       |

**返回参数**

1.5 获取用户信息
------------

**URL**

/api/users

**请求方法**

GET

**请求参数**

| 参数名          | 类型 | 参数说明     |
| --------------- | ---- | ------------ |
| id              | int  | 主键         |
| Usr_Name        | str  | 登录名       |
| Usr_Email       | str  | 用户邮箱     |
| Usr_Phone       | str  | 用户手机     |
| XCX_Title       | str  | 小程序标题   |
| Usr_Company     | str  | 用户公司     |
| Usr_Province    | str  | 所属省       |
| Usr_City        | str  | 所属市       |
| Usr_Detail_Addr | str  | 用户详细地址 |
| Usr_Area        | str  | 所属区       |

**请求参数**

2.1 新增仪表
------------

**URL**

/api_3/meters

**请求方法**

POST

**请求参数**

| 参数名            | 类型 | 是否必须 | 参数说明               |
| ----------------- | ---- | -------- | ---------------------- |
| Meter_Name        | str  | 是       | 仪表名                 |
| Meter_Type        | str  | 是       | 仪表类型               |
| Meter_Superior_id | str  | 是       | 所属机器的id           |
| Meter_Remarks     | str  | 否       | 仪表备注               |
| Meter_TotalAmount | Str  | 否       | 换表前累计总量         |
| Meter_IsVirtual   | str  | 否       | 是否为虚拟表，默认'0'  |
| Meter_Formula     | str  | 否       | 虚拟表计算公式，默认'' |
| Meter_IsTotal     | str  | 否       | 是否为总表，默认'0'    |
| Meter_IsCount     | str  | 否       | 是否统计，默认'0'      |
| Is_HandWork       | int  | 否       | 是否手工填报,默认0     |

**返回参数**

| 参数名 | 类型 | 参数说明 |
|--------|------|----------|
| id     | int  |          |

2.2 修改仪表
------------

**URL**

/api_3/meters

**请求方法**

PUT

**请求参数**

| 参数名            | 类型 | 是否必须 | 参数说明               |
| ----------------- | ---- | -------- | ---------------------- |
| id                | int  | 是       | 主键                   |
| Meter_Name        | str  | 是       | 仪表名                 |
| Meter_Type        | str  | 是       | 仪表类型               |
| Meter_Superior_id | int  | 是       | 所属机器的id           |
| Meter_Remarks     | str  | 否       | 仪表备注               |
| Meter_TotalAmount | Str  | 否       | 换表前累计总量         |
| Meter_IsVirtual   | str  | 否       | 是否为虚拟表，默认'0'  |
| Meter_Formula     | str  | 否       | 虚拟表计算公式，默认'' |
| Meter_IsTotal     | str  | 否       | 是否为总表，默认'0'    |
| Meter_IsCount     | str  | 否       | 是否统计，默认'0'      |
| Is_HandWork       | int  | 否       | 是否手工填报,默认0     |

**返回参数**

2.3 获取仪表信息
----------------

**URL**

/api_3/meters

**请求方法**

GET

**请求参数**

| 参数名          | 类型 | 是否必须 | 参数说明               |
| --------------- | ---- | -------- | ---------------------- |
| id              | int  | 否       | 仪表主键               |
| Meter_Type      | str  | 否       | 根基仪表类型筛选       |
| Meter_Superior  | str  | 否       | 根据所属机器的名称筛选 |
| Is_HandWork     | Int  | 否       | 根据是否手工填报筛选   |
| Per_Page_Counts | int  | 否       | 分页每页显示数         |
| Page_Counts     | Int  | 否       | 页码                   |
| Meter_IsCount   | Int  | 否       | 根据是否需要统计筛选   |
|                 |      |          |                        |

**返回参数**

| 参数名            | 类型 | 参数说明                                    |
| ----------------- | ---- | ------------------------------------------- |
| id                | int  | 主键id                                      |
| Meter_Name        | str  | 仪表名                                      |
| Meter_Type        | str  | 仪表类型                                    |
| Meter_Superior    | str  | 所属机器                                    |
| Meter_Department  | str  | 所属部门                                    |
| Meter_Remarks     | str  | 仪表描述                                    |
| Meter_TotalAmount | Str  | 换表前累计总量                              |
| Meter_IsVirtual   | str  | 是否为虚拟表，默认0                         |
| Meter_Formula     | str  | 虚拟表计算公式，默认''                      |
| Meter_IsTotal     | str  | 是否为总表，默认0                           |
| Meter_IsCount     | str  | 是否统计，默认0                             |
| Is_HandWork       | int  | 是否手工填报,默认0                          |
| Meter_Superior_id | Int  | 是机器的ID                                  |
| Meter_Parameter   | str  | 表的瞬时参数,例如:UA,UB,UC等, 多个用`,`隔开 |

2.4 删除仪表
------------

**URL**

/api_3/meters

**请求方法**

DELETE

**请求参数**

| 参数名 | 类型 | 是否必须 | 参数说明 |
|--------|------|----------|----------|
| id     | int  | 是       | 主键id   |

**返回参数**

2.5 获取所有机器
----------------

**URL**

/api_3/metersuperiors

**请求方法**

GET

**请求参数**

| 参数名           | 类型 | 是否必须 | 参数说明       |
| ---------------- | ---- | -------- | -------------- |
| id               | int  | 否       | 获取单条       |
| Meter_Department | str  | 否       | 根据部门筛选   |
| Per_Page_Counts  | int  | 否       | 分页每页显示数 |
| Page_Counts      | Int  | 否       | 页码           |

**返回参数**

| 参数名            | 类型 | 参数说明         |
| ----------------- | ---- | ---------------- |
| id                | Int  |                  |
| Meter_Superior    | str  | 机器名           |
| Meter_Department  | str  | 机器所属部门     |
| Machine_Image_Url | str  | 机器图片         |
| equipmentCode     | str  | 重点耗能设备类型 |
| equipmentUnitCode | str  | 重点耗能设备编号 |

2.6 增加机器
------------

**URL**

/api_3/metersuperiors

**请求方法**

POST

**请求参数**

**返回参数**

| 参数名            | 类型 | 是否必须 | 参数说明          |
|-------------------|------|----------|-------------------|
| Meter_Superior    | str  | 是       | 机器名            |
| Meter_Department  | str  | 是       | 机器所属部门      |
| equipmentCode     | str  | 是       |  重点耗能设备类型 |
| equipmentUnitCode | str  | 是       |  重点耗能设备编号 |

2.7 修改机器
------------

**URL**

/api_3/metersuperiors

**请求方法**

PUT

**请求参数**

**返回参数**

| 参数名            | 类型 | 是否必须 | 参数说明          |
|-------------------|------|----------|-------------------|
| id                | Int  | 是       |                   |
| Meter_Superior    | str  | 是       | 机器名            |
| Meter_Department  | str  | 是       | 机器所属部门      |
| equipmentCode     | str  | 是       |  重点耗能设备类型 |
| equipmentUnitCode | str  | 是       |  重点耗能设备编号 |

2.8 删除机器
------------

**URL**

/api_3/metersuperiors

**请求方法**

DELETE

**请求参数**

**返回参数**

| 参数名 | 类型 | 参数说明 |
|--------|------|----------|
| id     | Int  |          |

2.9 上传机器图片
------------

**URL**

/api_3/metersuperior_image

**请求方法**

POST

**请求参数**

**返回参数**

| 参数名            | 类型 | 参数说明 |
| ----------------- | ---- | -------- |
| Meter_Superior_id | Int  |          |
| Machine_Image     | file |          |

3.1 查询能源总耗能
------------------

**URL**

/api_3/allenergy

**请求方法**

GET

**请求参数**

| 参数名             | 类型 | 是否必须 | 参数说明                                                     |
| ------------------ | ---- | -------- | ------------------------------------------------------------ |
| Time_Type          | str  | 是       | 时间类型，1-年，2-月，3-天                                   |
| Time_Start         | str  | 是       | 查询开始时间，"2019-04-01 13:53:59"                          |
| Time_End           | str  | 是       | 查询结束时间，"2019-04-01 13:53:59"                          |
| Amount_Type        | str  | 是       | 总量类型，1-按仪表类型查，2-按仪表查 3-按机器查，4-按部门查  |
| Amount_Combination | str  | 否       | 如果Amount_Type=3或4，这个参数有效，1-按仪表类型查，2-按仪表查，默认1 |
| Amount_SortName    | str  | 否       | 如果Amount_Type=2或3或4，这个参数有效，仪表或机器或部门的名称，默认为所有，多个用‘，’隔开 |
| Amount_Value       | str  | 否       | 具体查询的能源类型，默认为所有，多个用‘，’隔开， 0-电，1-自来水，2-中水，3-热水，4-软水，5-中压蒸汽，6-低压蒸汽，7-空气，8-天然气 |

**返回参数**

| 参数名         | 类型 | 参数说明     |
|----------------|------|--------------|
| Meter_Superior | str  | 仪表上级名称 |
| Meter_Name     | str  | 仪表名称     |
| Ene_Type       | str  | 能源类型     |
| Ene_Name       | str  | 能源名称     |
| Total_Amount   | str  | 总量         |

说明：Meter_Superior和Meter_Name没有即为空

3.2 查询详细能源耗能 
---------------------

**URL**

/api_3/detailenergy

**请求方法**

GET

**请求参数**

| 参数名             | 类型 | 是否必须 | 参数说明                                                     |
| ------------------ | ---- | -------- | ------------------------------------------------------------ |
| Time_Type          | str  | 是       | 时间类型，1-年，2-月，3-天                                   |
| Time_Start         | str  | 是       | 查询开始时间，"2019-04-01 13:53:59"                          |
| Time_End           | str  | 是       | 查询结束时间，"2019-04-01 13:53:59"                          |
| Time_Interval      | str  | 否       | 查询时间间隔， 默认值:按年查，间隔为1，单位为月 按月查，间隔为1，单位为天 按天查，间隔为60，单位为分钟 |
| Amount_Type        | str  | 是       | 总量类型，1-按仪表类型查，2-按仪表查,3-按机器查，4-按部门查  |
| Amount_Combination | str  | 否       | 如果Amount_Type=3或4，这个参数有效，1-按仪表类型查，2-按仪表查，默认1 |
| Amount_SortName    | str  | 否       | 如果Amount_Type=2或3或4，这个参数有效，仪表或机器或部门的名称，默认为所有，多个用‘，’隔开 |
| Amount_Value       | str  | 否       | 具体查询的能源类型，默认为所有，多个用\`,\`隔开， 0-电，1-自来水，2-中水，3-热水，4-软水，5-中压蒸汽，6-低压蒸汽，7-空气，8-天然气 |

**返回参数**

| 参数名         | 类型 | 参数说明                                        |
|----------------|------|-------------------------------------------------|
| Time           | str  | 时间点，"2019-04-01 13:53:59" %Y-%M-%D %h:%m:%s |
| Meter_Superior | str  | 仪表上级名称                                    |
| Meter_Name     | str  | 仪表名称                                        |
| Ene_Type       | str  | 能源类型                                        |
| Ene_Name       | str  | 能源名称                                        |
| Total_Amount   | str  | 该时间段内的总量                                |

3.3 测点数据查询
----------------

**URL**

/api_3/measure

**请求方法**

GET

**请求参数**

| 参数名        | 类型 | 是否必须 | 参数说明                                                                                               |
|---------------|------|----------|--------------------------------------------------------------------------------------------------------|
| Time_Type     | str  | 是       | 时间类型，1-年，2-月，3-天                                                                             |
| Meter_Name    | str  | 是       | 仪表名称                                                                                               |
| Time_Start    | str  | 是       | 查询开始时间，"2019-04-01 13:53:59"                                                                    |
| Time_End      | str  | 是       | 查询结束时间，"2019-04-01 13:53:59"                                                                    |
| Time_Interval | str  | 否       | 查询时间间隔， 默认值:按年查，间隔为1，单位为月 按月查，间隔为1，单位为天 按天查，间隔为60，单位为分钟 |
| Measure_Name  | str  | 否       | 测点名称，默认所有，多个用‘，’隔开                                                                     |

**返回参数**

| 参数名        | 类型 | 参数说明                                        |
|---------------|------|-------------------------------------------------|
| TIme          | str  | 时间点，"2019-04-01 13:53:59" %Y-%M-%D %h:%m:%s |
| Measure_Name  | str  | 测点名称                                        |
| Measure_Value | str  | 该时间点的值                                    |

说明：按年或月查询时，显示结果为平均值

3.4 生成能源报表
----------------

**URL**

/api_3/report

**请求方法**

POST

**请求参数**

| 参数名             | 类型 | 是否必须 | 参数说明                                                     |
| ------------------ | ---- | -------- | ------------------------------------------------------------ |
| Time_Type          | str  | 是       | 时间类型，1-年，2-月，3-天                                   |
| Time_Start         | str  | 是       | 查询开始时间，"2019-04-01 13:53:59"                          |
| Time_End           | str  | 是       | 查询结束时间，"2019-04-01 13:53:59"                          |
| Time_Interval      | str  | 否       | 查询时间间隔， 默认值:按年查，间隔为1，单位为月 按月查，间隔为1，单位为天 按天查，间隔为60，单位为分钟 |
| Amount_Type        | str  | 是       | 总量类型，1-按仪表类型查，2-按仪表查,3-按机器查，4-按部门查 |
| Amount_Combination | str  | 否       | 如果Amount_Type=3或4，这个参数有效，1-按仪表类型查，2-按仪表查，默认1 |
| Amount_SortName    | str  | 否       | 仪表的名称，默认为所有，多个用‘，’隔开                       |
| Amount_Value       | str  | 否       | **默认为所有，多个用‘，’隔开，** 0-电，1-自来水，2-中水，3-热水，4-软水，5-中压蒸汽，6-低压蒸汽，7-空气，8-天然气 |


**返回参数**

| 参数名    | 类型 | 参数说明       |
|-----------|------|----------------|
| File_Name | str  | 文件名称 .xlsx |

File_Name示例：Year_report2019.xlsx

Month_report2019_6.xlsx

>   Day_report2019_6_12.xlsx

3.5 查询详细能源耗能--报表
--------------------------

**URL**

/api_3/form_detailenergy

**请求方法**

POST

**请求参数**

| 参数名          | 类型 | 是否必须 | 参数说明                                                                                                                              |
|-----------------|------|----------|---------------------------------------------------------------------------------------------------------------------------------------|
| Time_Type       | str  | 是       | 时间类型，1-年，2-月，3-天                                                                                                            |
| Time_Start      | str  | 是       | 查询开始时间，"2019-04-01 13:53:59"                                                                                                   |
| Time_End        | str  | 是       | 查询结束时间，"2019-04-01 13:53:59"                                                                                                   |
| Time_Interval   | str  | 否       | 查询时间间隔， 默认值:按年查，间隔为1，单位为月 按月查，间隔为1，单位为天 按天查， 间隔为60，单位为分                                 |
| Amount_Type        | str  | 是       | 总量类型，1-按仪表类型查，2-按仪表查,3-按机器查，4-按部门查  |
| Amount_Combination | str  | 否       | 如果Amount_Type=3或4，这个参数有效，1-按仪表类型查，2-按仪表查，默认1 |
| Amount_SortName | str  | 否       | 仪表的名称,**默认为所有**，多个用‘，’隔开                                                                                             |
| Amount_Value    | str  | 否       | 具体查询的能源类型，**默认为所有**，多个用‘，’隔开， 0-电，1-自来水，2-中水，3-热水，4-软水，5-中压蒸汽，6-低压蒸汽，7-空气，8-天然气 |

**返回参数**

| 参数名           | 类型 | 参数说明                                                                         |
|------------------|------|----------------------------------------------------------------------------------|
| Meter_Department | str  | 所属部门                                                                         |
| Meter_Superior   | str  | 仪表上级名称(所属机器)                                                           |
| Meter_Name       | str  | 仪表名称                                                                         |
| Ene_Type         | str  | 能源类型                                                                         |
| Ene_Name         | str  | 能源名称                                                                         |
| Detail_Amounts   | list | 各段时间点总量，格式定义: [{ "Total_Amount":"", "Time":"2019-04-01 13:00:00" },] |

举例说明：

{

"Err_No": "",

"Err_msg":"",

"Data":

[

>   {

>   "Meter_Department": "东车间",

>   "Meter_Superior": "机器1",

>   "Meter_Name": "染色工业水表",

>   "Ene_Type": "1",

"Ene_Name": "自来水",

"Shift_Amounts": [{

"Shift_Name": "白班",

"Shift_Amount": "1000"

}, {

"Shift_Name": "夜班",

"Shift_Amount": "2000"

}],

"Detail_Amounts": [{

"Time": "2019-04-01 01:30:00",

>   "Total_Amount": "10.00"

>   },

>   {

>   "Time": "2019-04-01 02:30:00",

>   "Total_Amount": "20.00"

>   },

>   {

>   "Time": "2019-04-01 03:30:00",

>   "Total_Amount": "30.00"

>   },

>   {

>   "Time": "2019-04-01 04:30:00",

>   "Total_Amount": "40.00"

>   }

>   ]

>   }

]

}

4.1 费率修改
------------

**URL**

/api_3/rate

**请求方法**

PUT

**请求参数**

| 参数名         | 类型 | 是否必须 | 参数说明                   |
|----------------|------|----------|----------------------------|
| id             | int  | 是       |                            |
| Rate_Name      | str  | 是       | 费率名称                   |
| Rate_Type      | str  | 是       | 费率类型                   |
| Rate_Value     | str  | 否       | 费率值                     |
| isSegmentation | str  | 是       | 是否分段，0-分段，1-不分段 |
| Seg_Begin      | str  | 否       | 开始时间                   |
| Seg_Begin_Rate | str  | 否       | 开始计费值                 |
| Seg_End        | str  | 否       | 结束时间                   |
| Seg_End_Rate   | str  | 否       | 结束计费值                 |
| Rate_Unit      | str  | 是       | 计费单位                   |

**返回参数**

4.2 费率查询
------------

**URL**

/api_3/rate

**请求方法**

GET

**请求参数**

**返回参数**

| 参数名         | 类型 | 参数说明   |
|----------------|------|------------|
| id             | int  |            |
| Rate_Name      | str  | 费率名称   |
| Rate_Type      | str  | 费率类型   |
| Rate_Value     | str  | 费率值     |
| isSegmentation | str  | 是否分段   |
| Seg_Begin      | str  | 开始时间   |
| Seg_Begin_Rate | str  | 开始计费值 |
| Seg_End        | str  | 结束时间   |
| Seg_End_Rate   | str  | 结束计费值 |
| Rate_Unit      | str  | 计费单位   |

4.3 查询个性化设置
------------------

**URL**

/api_3/personalise

**请求方法**

GET

**请求参数**

**返回参数**

| 参数名      | 类型 | 参数说明                              |
|-------------|------|---------------------------------------|
| Year_Start  | str  | 年开始月                              |
| Year_End    | str  | 年结束月                              |
| Month_Start | str  | 月开始天                              |
| Month_End   | str  | 月结束天                              |
| Day_Start   | str  | 天开始时，格式"07:30:00"或"-07:30:00" |
| Day_End     | str  | 天结束时                              |

4.4 修改个性化设置
------------------

**URL**

/api_3/personalise

**请求方法**

PUT

**请求参数**

| 参数名      | 类型 | 是否必须 | 参数说明                                 |
|-------------|------|----------|------------------------------------------|
| Year_Start  | str  | 是       | 年开始月,默认1表示当年1月, -1表示上年1月 |
| Year_End    | str  | 是       | 年结束月,默认1表示下年1月 -1表示当年1月  |
| Month_Start | str  | 是       | 月开始天,默认1表示当月1号 -1表示上月1号  |
| Month_End   | str  | 是       | 月结束天,默认1表示下月1号 -1表示当月1号  |
| Day_Start   | str  | 是       | 天开始时格式"07:30:00"或"-07:30:00"      |
| Day_End     | str  | 是       | 天结束时,格式"07:30:00"或"-07:30:00"     |

注：

 -12\<=（year参数）\<=12

\-31\<=（month参数）\<=31

\-23\<=（day参数）\<=23

**返回参数**

5.1 获取省平台基础数据
----------------------

**URL**

/api_3/PRP_base_infos

**请求方法**

GET

**请求参数**

**返回参数**

| 参数名            | 类型 | 参数说明           |
|-------------------|------|--------------------|
| collectSystemType | List | 数据采集来源       |
| collectItemUsage  | List | 采集数据项数据用途 |
| collectItem       | List | 采集数据项         |

**collectSystemType元素的格式如下:**

```json
{

    "code":"1",

    "name":"管理信息系统"

}
```

**collectItemUsage元素的格式如下:**

```json
{

    "code":"11",

    "name":"购进已消费"

}
```

**collectItem元素的格式如下:**

```json
{

    "code":"023300", //能源编码

    "name":"电力",

    "unit":"千瓦时",

    "zbckz":"0.7143", // 折标系数

}
```



5.2 上传用能单位基础信息
------------------------

**URL**

/api_3/PRP_organization_infos

**请求方法**

PUT

**请求**

| 参数名            | 类型 | 是否必须 | 参数说明       |
|-------------------|------|----------|----------------|
| collectItemConfig | List | 是       | 采集数据项配置 |
| enterprise        | List | 是       | 用能单位信息   |
| group             | List | 是       | 集团信息       |
| process           | List | 否       | 生产工序       |
| processUnit       | List | 否       | 工序单元       |

**参数**

```json
1.{
2.    "collectItemConfig": [ // 采集数据项配置
3.        {  
4.            "name": "全厂-二次能源-电力-购进已消费", // 采集数据项指标名称 ,用户自填
5.            "Meter_id":12, //对应表的主键
6.            "processCode": "00", // 生产工序, 不填默认为"00"
7.            "processUnitCode": "00", // 工序单元
8.            "equipmentCode": "00", // 重点耗能设备类型
9.            "equipmentUnitCode": "00", // 重点耗能设备编号
10.           "Energy_Code": "013300", // 能源编码(必填) 
11.           "Real_zbckz": "0.7143", // 能源实际折标系数
12.           "dataUsageCode": "11", // 用途编码(必填) 
13.           "inputType": "1", // 数据采集来源(必填) 
14.           "statType": "1", //采集频率,0 实时; 1 日; 2 月;3 年  (必填) 
15.           "collectSystemName": "EXCENERGY 能源采集系统", // 采集系统名称  
16.           "remark": "", // 备注  
17.           "scope": 1 // 范围 1:全厂,2:生产工序,3:生产工序单元,4:重点耗能设备   (必填) 
18.        }  
19.    ],  
20.    "enterprise": { // 用能单位信息(必填)  
21.        "name": "示例钢铁有限责任公司", // 单位名称(必填)  
22.        "typeCode": "159", // 单位类型(必填)  
23.        "typeName": "其他有限责任公司", // 单位类型名  
24.        "industryCode": "C3120", // 行业编码(必填)  
25.        "regionCode": "410481", // 区域编码(必填 6 位到地区级别)  
26.        "regionName": "示例市", // 地区名  
27.        "center": false, // 是否央企(必填)  
28.        "jgzh": false, // 是否能源加工转换类企业(必填)  
29.        "energyConsumeLevel": 4, // 1:5000 吨以下, 2:5000~10000 吨,3:1 万-10 万吨,4:10 万-50 万吨,5:50 万-300 万吨,6:300 万吨以上(必填)  
30.        "latitude": 33.283433, // 用能单位主要厂址中心纬度(必填)  
31.        "longitude": 113.505883, // 用能单位主要厂址中心经度(必填)  
32.        "phone": "0375-8111111", // 企业联系电话(必填)  
33.        "fax": "0375-8111111", // 传真  
34.        "email": "zxjc@163.com", // 电子邮箱  
35.        "address": "河南省示例市人民大道 1 号", // 地址  
36.        "zipCode": "462500", // 邮编  
37.        "url": "", // 用能单位网站地址 URL  
38.        "fieldCode": "100", // 领域编码,工业:100,交通运输.仓储和邮政业:200,住宿和餐饮业:300,批发和零售业:400,教育:500,其他:600  
39.        "fieldName": "工业", // 领域名称  
40.        "corporationName": "赵钱孙", // 法人代表  
41.        "registerDate": "1998-10-10 00:00:00", // 注册日期  
42.        "registerPrincipal": 10000, // 注册资金,万元  
43.        "energyOffice": "机电能源部", // 能管机构名称  
44.        "energyOfficial": "李周", // 主管节能领导姓名  
45.        "energyOfficialPosition": "机电能源部主任", // 主管节能领导职位  
46.        "energyOfficialPhone": "18866669999", // 主管节能领导联系电话  
47.        "energyPass": false, // 是否通过能源管理体系认证  
48.        "energyRespName": "吴郑", // 能管负责人姓名  
49.        "energyRespPhone": "18677778888", // 能管负责人电话  
50.        "passDate": "", // 认证日期  
51.        "passOrg": "", // 认证机构  
52.        "productionLine": "电弧炉生产宽厚板短流程生产线", //企业主要生产线名称  
53.        "leadingProduct": "钢板", //企业主导产品  
54.        "remark": "企业信息化水平落后,除电力消费数据外,其他数据指标均采用人工填报方式上传" // 备注  
55.    },  
56.    "group": { //集团(非必填)  
57.        "name": "河北示例钢铁股份有限公司", // 集团名称  
58.        "address": "河北省示例市体育南大街 385 号", // 集团地址  
59.        "remark": "" // 备注  
60.    },  
61.    "process": [ // 生产工序(非必填)  
62.        {  
63.            "processCode": "06", // 生产工序编码  
64.            "processName": "电炉工序", // 生产工序名称  
65.            "remark": "" // 备注  
66.        }  
67.    ],  
68.    "processUnit": [ // 工序单元(非必填)  
69.        {  
70.            "code": "01", // 工序单元编码  
71.            "name": "#1 电炉", // 工序单元名称  
72.            "processCode": "06", // 生产工序编码  
73.            "commDate": "2010-10-10 00:00:00", // 投产日期  
74.            "designedCapacity": "年产钢水 50 万吨", // 生产能力  
75.            "remark": "" // 备注  
76.        }  
77.    ]  
78.}   
```

**返回参数**

5.3 获取用能单位基础信息
------------------------

**URL**

/api_3/PRP_organization_infos

**请求方法**

GET

**请求参数**

**返回参数**

| 参数名            | 类型 | 参数说明       |
|-------------------|------|----------------|
| collectItemConfig | List | 采集数据项配置 |
| enterprise        | List | 用能单位信息   |
| group             | List | 集团信息       |
| process           | List | 生产工序       |
| processUnit       | List | 工序单元       |

```json
79.{  
80.    "collectItemConfig": [ // 采集数据项配置
81.        {  
82.            "name": "全厂-二次能源-电力-购进已消费", // 采集数据项指标名称 ,用户自填
83.            "Meter_id":12, //对应表的主键
84.            "processCode": "00", // 生产工序, 不填默认为"00"
85.            "processUnitCode": "00", // 工序单元
86.            "equipmentCode": "00", // 重点耗能设备类型
87.            "equipmentUnitCode": "00", // 重点耗能设备编号
88.            "Energy_Code": "013300", // 能源编码
89.            "Real_zbckz": "0.7143", // 能源实际折标系数
90.            "dataUsageCode": "11", // 用途编码
91.            "inputType": "1", // 数据采集来源
92.            "statType": "1", //采集频率,0 实时; 1 日; 2 月;3 年
93.            "collectSystemName": "EXCENERGY 能源采集系统", // 采集系统名称  
94.            "remark": "", // 备注  
95.            "scope": 1 // 范围 1:全厂,2:生产工序,3:生产工序单元,4:重点耗能设备 
96.        }  
97.    ],  
98.    "enterprise": { // 用能单位信息
99.         "name": "示例钢铁有限责任公司", // 单位名称
100.        "typeCode": "159", // 单位类型
101.        "typeName": "其他有限责任公司", // 单位类型名  
102.        "industryCode": "C3120", // 行业编码
103.        "regionCode": "410481", // 区域编码(必填 6 位到地区级别)  
104.        "regionName": "示例市", // 地区名  
105.        "center": false, // 是否央企
106.        "jgzh": false, // 是否能源加工转换类企业
107.        "energyConsumeLevel": 4, // 1:5000 吨以下, 2:5000~10000 吨,3:1 万-10 万吨,4:10 万-50 万吨,5:50 万-300 万吨,6:300 万吨以上
108.        "latitude": 33.283433, // 用能单位主要厂址中心纬度
109.        "longitude": 113.505883, // 用能单位主要厂址中心经度
110.        "phone": "0375-8111111", // 企业联系电话
111.        "fax": "0375-8111111", // 传真  
112.        "email": "zxjc@163.com", // 电子邮箱  
113.        "address": "河南省示例市人民大道 1 号", // 地址  
114.        "zipCode": "462500", // 邮编  
115.        "url": "", // 用能单位网站地址 URL  
116.        "fieldCode": "100", // 领域编码,工业:100,交通运输.仓储和邮政业:200,住宿和餐饮业:300,批发和零售业:400,教育:500,其他:600  
117.        "fieldName": "工业", // 领域名称  
118.        "corporationName": "赵钱孙", // 法人代表  
119.        "registerDate": "1998-10-10 00:00:00", // 注册日期  
120.        "registerPrincipal": 10000, // 注册资金,万元  
121.        "energyOffice": "机电能源部", // 能管机构名称  
122.        "energyOfficial": "李周", // 主管节能领导姓名  
123.        "energyOfficialPosition": "机电能源部主任", // 主管节能领导职位  
124.        "energyOfficialPhone": "18866669999", // 主管节能领导联系电话  
125.        "energyPass": false, // 是否通过能源管理体系认证  
126.        "energyRespName": "吴郑", // 能管负责人姓名  
127.        "energyRespPhone": "18677778888", // 能管负责人电话  
128.        "passDate": "", // 认证日期  
129.        "passOrg": "", // 认证机构  
130.        "productionLine": "电弧炉生产宽厚板短流程生产线", //企业主要生产线名称  
131.        "leadingProduct": "钢板", //企业主导产品  
132.        "remark": "企业信息化水平落后,除电力消费数据外,其他数据指标均采用人工填报方式上传" // 备注  
133.    },  
134.    "group": { //集团(非必填)  
135.        "name": "河北示例钢铁股份有限公司", // 集团名称  
136.        "address": "河北省示例市体育南大街 385 号", // 集团地址  
137.        "remark": "" // 备注  
138.    },  
139.    "process": [ // 生产工序(非必填)  
140.        {  
141.            "processCode": "06", // 生产工序编码  
142.            "processName": "电炉工序", // 生产工序名称  
143.            "remark": "" // 备注  
144.        }  
145.    ],  
146.    "processUnit": [ // 工序单元(非必填)  
147.        {  
148.            "code": "01", // 工序单元编码  
149.            "name": "#1 电炉", // 工序单元名称  
150.            "processCode": "06", // 生产工序编码  
151.            "commDate": "2010-10-10 00:00:00", // 投产日期  
152.            "designedCapacity": "年产钢水 50 万吨", // 生产能力  
153.            "remark": "" // 备注  
154.        }  
155.    ]  
156.}  
```

5.4 获取版本信息
----------------

**URL**

/api_3/PRP_version

**请求方法**

GET

**请求参数**

**返回参数**

| 参数名         | 类型 | 参数说明                 |
|----------------|------|--------------------------|
| regVersion     | Str  | 注册服务版本信息         |
| dicVersion     | Str  | 基础数据版本信息         |
| requireUpdate  | Int  | 1:需要更新,0:不需要更新  |
| deviceID       | Str  | 设备序列号               |
| enterpriseCode | str  | 社会信用代码             |
| region         | str  | 行政区划代码，具体到县级 |

5.5 更新版本数据(更新后平台基础数据会变化)
------------------------------------------

**URL**

/api_3/PRP_version

**请求方法**

POST

**请求参数**

| 参数名         | 类型 | 是否必须 | 参数说明                 |
|----------------|------|----------|--------------------------|
| enterpriseCode | str  | 是       | 社会信用代码             |
| region         | str  | 是       | 行政区划代码，具体到县级 |

**返回参数**

5.6 添加填报数据
----------------

**URL**

/api_3/PRP_manual_energy_measure_datas

**请求方法**

POST

**请求参数**

| 参数名      | 类型     | 是否必须 | 参数说明             |
|-------------|----------|----------|----------------------|
| Meter_id    | int      | 是       | 对应表的主键         |
| Date_Time   | datetime | 是       | 数据时间             |
| Date_Type   | str      | 是       | 时间类型，2-月，3-天 |
| Data_Amount | str      | 是       | 数据                 |

**返回参数**

5.7 获取采集数据上传记录
------------------------

**URL**

/api_3/PRP_uploaded_energy_measure_datas

**请求方法**

GET

**请求参数**

| 参数名     | 类型 | 是否必须 | 参数说明                            |
|------------|------|----------|-------------------------------------|
| Time_Start | str  | 是       | 查询开始时间，"2019-04-01 13:53:59" |
| Time_End   | str  | 是       | 查询结束时间，"2019-04-01 13:53:59" |

**返回参数**

| 参数名        | 类型     | 参数说明             |
|---------------|----------|----------------------|
| id            | int      |                      |
| Original_Data | Json     | 上传的原始数据       |
| Target_Url    | str      | 格式"07:30:00"       |
| Response_Data | Json     | 上传时返回的原始数据 |
| Upload_Time   | datetime | 上传的时间           |

5.8 获取省平台操作结果
----------------------

**URL**

/api_3/PRP_operation_result

**请求方法**

GET

**请求参数**

| 参数名         | 类型 | 是否必须 | 参数说明                               |
|----------------|------|----------|----------------------------------------|
| Operation_Type | int  | 是       | 1:上传用能单位基础信息, 2:更新版本数据 |

**返回参数**

| 参数名        | 类型 | 参数说明             |
|---------------|------|----------------------|
| Result        | int  | 1:成功, 0:失败       |
| Response_Data | Str  | 上传时返回的原始数据 |

## 6.1 获取报警状态

**URL**

/api_3/alarm_status

**请求方法**

GET

**请求参数**

| 参数名          | 类型 | 参数说明               |
| --------------- | ---- | ---------------------- |
| Per_Page_Counts | int  | 分页每页显示数，默认10 |
| Page_Counts     | int  | 页码，默认0            |

**返回参数**

| 参数名         | 类型 | 参数说明                                                  |
| -------------- | ---- | --------------------------------------------------------- |
| id             | int  |                                                           |
| Alarm_Name     | str  | 报警名称                                                  |
| Alarm_Level    | int  | 1: 一般 2:警告 3:严重                                     |
| Alarm_Type     | int  | 报警类型, 1: 机器每小时累计能耗报警, 2:机器瞬时参数报警， |
| Alarm_Notify   | int  | 1:平台通知 2:短信通知 3: 邮箱通知 4:微信通知              |
| Notify_Address | str  | 通知地址(手机号/邮箱/微信号)                              |

## 6.2 添加报警状态

**URL**

/api_3/alarm_status

**请求方法**

POST

**请求参数**

| 参数名         | 类型 | 是否必须 | 参数说明                                                |
| -------------- | ---- | -------- | ------------------------------------------------------- |
| Alarm_Name     | str  | 是       | 报警名称                                                |
| Alarm_Type     | int  | 是       | 报警类型, 1: 机器每小时累计能耗报警, 2:机器瞬时参数报警 |
| Alarm_Level    | int  | 是       | 1: 一般 2:警告 3:严重                                   |
| Alarm_Notify   | int  | 是       | 1:平台通知 2:短信通知 3: 邮箱通知 4:微信通知            |
| Notify_Address | str  | 是       | 通知地址(手机号/邮箱/微信号)                            |

**返回参数**

## 6.3 修改报警状态

**URL**

/api_3/alarm_status

**请求方法**

PUT

**请求参数**

| 参数名         | 类型 | 是否必须 | 参数说明                                                |
| -------------- | ---- | -------- | ------------------------------------------------------- |
| id             | int  | 是       |                                                         |
| Alarm_Name     | str  | 是       | 报警名称                                                |
| Alarm_Type     | int  | 是       | 报警类型, 1: 机器每小时累计能耗报警, 2:机器瞬时参数报警 |
| Alarm_Level    | int  | 是       | 1: 一般 2:警告 3:严重                                   |
| Alarm_Notify   | int  | 是       | 1:平台通知 2:短信通知 3: 邮箱通知 4:微信通知            |
| Notify_Address | str  | 是       | 通知地址(手机号/邮箱/微信号)                            |

**返回参数**

## 6.4 删除报警状态

**URL**

/api_3/alarm_status

**请求方法**

DELETE

**请求参数**

| 参数名 | 类型 | 参数说明 |
| ------ | ---- | -------- |
| id     |      |          |



**返回参数**



## 6.5 获取报警状态规则

**URL**

/api_3/alarm_status_rules

**请求方法**

GET

**请求参数**

| 参数名          | 类型 | 参数说明               |
| --------------- | ---- | ---------------------- |
| Per_Page_Counts | int  | 分页每页显示数，默认10 |
| Page_Counts     | int  | 页码，默认0            |
| Alarm_id        | str  | 筛选, 传报警状态主键id |

**返回参数**

| 参数名          | 类型  | 参数说明   |
| --------------- | ----- | ---------- |
| id              | int   |            |
| Rule_Name       | str   | 规则名称   |
| Alarm_id        | int   | 报警主键id |
| Meter_id        | int   | 仪表主键id |
| Meter_Parameter | str   | 判断测点   |
| LowerLimit      | float |            |
| UpperLimit      | float |            |

## 6.6 添加报警状态规则

**URL**

/api_3/alarm_status_rules

**请求方法**

POST

**请求参数**

| 参数名          | 类型  | 是否必须 | 参数说明                                           |
| --------------- | ----- | -------- | -------------------------------------------------- |
| Rule_Name       | str   | 是       | 规则名称                                           |
| Alarm_id        | int   | 是       | 报警主键id                                         |
| Meter_id        | int   | 是       | 仪表主键id                                         |
| Meter_Parameter | str   |          | 判断测点, 仅当报警类型为`机器瞬时参数报警`时需要传 |
| LowerLimit      | float | 是       |                                                    |
| UpperLimit      | float | 是       |                                                    |



**返回参数**

## 6.7 修改报警状态规则

**URL**

/api_3/alarm_status_rules

**请求方法**

PUT

**请求参数**

**

| 参数名          | 类型  | 是否必须 | 参数说明                                           |
| --------------- | ----- | -------- | -------------------------------------------------- |
| id              | int   | 是       | 主键                                               |
| Rule_Name       | str   | 是       | 规则名称                                           |
| Alarm_id        | int   | 是       | 报警主键id                                         |
| Meter_id        | int   | 是       | 仪表主键id                                         |
| Meter_Parameter | str   |          | 判断测点, 仅当报警类型为`机器瞬时参数报警`时需要传 |
| LowerLimit      | float | 是       |                                                    |
| UpperLimit      | float | 是       |                                                    |



**返回参数**

## 6.8 删除报警状态规则

**URL**

/api_3/alarm_status_rules

**请求方法**

DELETE

**请求参数**

| 参数名 | 类型 | 参数说明 |
| ------ | ---- | -------- |
| id     | int  |          |

**返回参数**

## 6.9 获取报警记录

**URL**

/api_3/alarm_message

**请求方法**

DELETE

**请求参数**

| 参数名          | 类型     | 是否必须 | 参数说明               |
| --------------- | -------- | -------- | ---------------------- |
| Per_Page_Counts | int      | 否       | 分页每页显示数，默认10 |
| Page_Counts     | int      | 否       | 页码，默认0            |
| Time_Start      | datetime | 是       |                        |
| Time_End        | datetime | 是       |                        |
| Meter_Name      | str      | 否       | 仪表筛选               |
| Meter_Superior  | str      | 否       | 机器筛选               |
| Alarm_Type      | int      | 否       | 筛选                   |
| Alarm_Level     | int      | 否       | 筛选                   |
| Rule_Name       | str      | 否       | 筛选                   |
**返回参数**

| 参数名         | 类型 | 参数说明     |
| -------------- | ---- | ------------ |
| id     | int  |      |
| Alarm_Name     | str  | 报警名称     |
| Rule_Name      | str  | 报警规则名称 |
| Meter_Name     | str  | 仪表名称     |
| Meter_Superior | str  | 机器名称     |
| Alarm_Type     | int  | 报警类型     |
| Alarm_Level    | int  | 报警级别     |
| Alarm_Content  | str  | 报警内容     |
| Alarm_Time     | str  | 报警时间     |

6.10 获取报警个数的统计(年月日) 
---------------------

**URL**

/api_3/alarm_statistic_nums

**请求方法**

GET

**请求参数**

| 参数名           | 类型     | 是否必须 | 参数说明                                                     |
| ---------------- | -------- | -------- | ------------------------------------------------------------ |
| Time_Type        | str      | 是       | 时间类型，1-年，2-月，3-天                                   |
| Time_Start       | datetime | 是       | 查询开始时间，"2019-04-01 00:00:00"                          |
| Time_End         | datetime | 是       | 查询结束时间，"2019-04-02 00:00:00"                          |
| Statistic_Method | int      | 是       | 0:总计,1:根据`Alarm_Level`统计,2:根据`Alarm_Type`统计,3:根据`Alarm_Notify`统计 |
| Return_Format    | int      | 是       | 1:返回总量, 2: 返回详细总量(查天, 返回每小时的值)            |
返回参数

| 参数名       | 类型 | 参数说明                       |
| ------------ | ---- | ------------------------------ |
| Time         | str  | 时间下标                       |
| Total_Amount | int  | 个数                           |
| Alarm_Level  | int  | 是否返回根据`Statistic_Method` |
| Alarm_Type   | int  | 是否返回根据`Statistic_Method` |
| Alarm_Notify | int  | 是否返回根据`Statistic_Method` |

## 7.1 获取OEE规则

**URL**

/api_3/OEE_status_rules

**请求方法**

GET

**请求参数**

| 参数名          | 类型 | 参数说明               |
| --------------- | ---- | ---------------------- |
| Per_Page_Counts | int  | 分页每页显示数，默认10 |
| Page_Counts     | int  | 页码，默认0            |

**返回参数**

| 参数名          | 类型  | 参数说明 |
| --------------- | ----- | -------- |
| id              | int   |          |
| Rule_Name       | str   | 规则名称 |
| Status_Name     | str   | 状态名称 |
| Meter_id        | int   | 仪表主键 |
| Meter_Parameter | str   | 判断测点 |
| LowerLimit      | float |          |
| UpperLimit      | float |          |
| Meter_Superior_id | str   |机器    |

## 7.2 添加OEE规则

**URL**

/api_3/OEE_status_rules

**请求方法**

POST

**请求参数**

| 参数名          | 类型  | 是否必须 | 参数说明   |
| --------------- | ----- | -------- | ---------- |
| Rule_Name       | str   | 是       | 规则名称   |
| Status_Name     | str   | 是       | 状态名称   |
| Meter_id        | int   | 是       | 仪表主键id |
| Meter_Parameter | str   | 是       | 判断测点   |
| LowerLimit      | float | 是       |            |
| UpperLimit      | float | 是       |            |
| Meter_Superior_id | str  |是       | 机器       |


**返回参数**

## 7.3 修改OEE规则

**URL**

/api_3/OEE_status_rules

**请求方法**

PUT

**请求参数**

| 参数名          | 类型  | 是否必须 | 参数说明   |
| --------------- | ----- | -------- | ---------- |
| id              | int   | 是       | 主键       |
| Rule_Name       | str   | 是       | 规则名称   |
| Status_Name     | str   | 是       | 状态名称   |
| Meter_id        | int   | 是       | 仪表主键id |
| Meter_Parameter | str   | 是       | 判断测点   |
| LowerLimit      | float | 是       |            |
| UpperLimit      | float | 是       |            |
| Meter_Superior_id | int | 是    | 机器    |

**返回参数**

## 7.4 删除OEE规则

**URL**

/api_3/OEE_status_rules

**请求方法**

DELETE

**请求参数**

| 参数名 | 类型 | 参数说明 |
| ------ | ---- | -------- |
| id     | int  |          |

**返回参数**

## 7.5 获取OEE时间段内的状态记录

**URL**

/api_3/OEE_statistic_records

**请求方法**

GET

**请求参数**

| 参数名     | 类型     | 是否必须 | 参数说明                            |
| ---------- | -------- | -------- | ----------------------------------- |
| Time_Start | datetime | 是       | 查询开始时间，"2019-04-01 00:00:00" |
| Time_End   | datetime | 是       | 查询结束时间，"2019-04-02 00:00:00" |
| Meter_Superior_id | int | 是   | 机器筛选               |

> 注: 1. 开始结束时间的间隔最大为24小时
>
> ​      2. 初始点一条数据, 后面的数据都是状态切换才返回

返回参数

| 参数名      | 类型 | 参数说明 |
| ----------- | ---- | -------- |
| Time        | str  | 时间下标 |
| Status_Name | str  | 状态名称 |

7.6 获取OEE状态时间的统计(年月日) 
---------------------

**URL**

/api_3/OEE_statistic

**请求方法**

GET

**请求参数**

| 参数名        | 类型     | 是否必须 | 参数说明                                          |
| ------------- | -------- | -------- | ------------------------------------------------- |
| Time_Type     | str      | 是       | 时间类型，1-年，2-月，3-天                        |
| Time_Start    | datetime | 是       | 查询开始时间，"2019-04-01 00:00:00"               |
| Time_End      | datetime | 是       | 查询结束时间，"2019-04-02 00:00:00"               |
| Return_Format | int      | 是       | 1:返回总量, 2: 返回详细总量(查天, 返回每小时的值) |
| Meter_Superior_id | int | 是      | 机器筛选               |
返回参数

| 参数名       | 类型 | 参数说明           |
| ------------ | ---- | ------------------ |
| Time         | str  | 时间下标           |
| Total_Amount | int  | 时间总量(单位: 秒) |
| Status_Name  | str  | 状态名称           |

## 8.1 获取产品信息

**URL**

/api_3/products

**请求方法**

GET

**请求参数**

| 参数名          | 类型 | 参数说明               |
| --------------- | ---- | ---------------------- |
| Per_Page_Counts | int  | 分页每页显示数，默认10 |
| Page_Counts     | int  | 页码，默认0            |



**返回参数**

| 参数名           | 类型 | 参数说明 |
| ---------------- | ---- | -------- |
| id               | Int  |          |
| Product_Name     | str  | 产品名称 |
| Product_Unit     | str  | 计量单位 |
| Remarks          | str  | 产品备注 |


## 8.2 添加产品信息

**URL**

/api_3/products

**请求方法**

POST

**请求参数**

**返回参数**

| 参数名       | 类型 | 是否必须 | 参数说明 |
| ------------ | ---- | -------- | -------- |
| Product_Name | str  | 是       | 产品名称 |
| Product_Unit | str  | 否       | 计量单位 |
| Remarks      | str  | 否       | 产品备注 |


## 8.3 修改产品信息

**URL**

/api_3/products

**请求方法**

PUT

**请求参数**

**返回参数**

| 参数名       | 类型 | 是否必须 | 参数说明 |
| ------------ | ---- | -------- | -------- |
| id           | Int  | 是       |          |
| Product_Name | str  | 是       | 产品名称 |
| Product_Unit | str  | 否       | 计量单位 |
| Remarks      | str  | 否       | 产品备注 |


## 8.4 删除产品信息

**URL**

/api_3/products

**请求方法**

DELETE

**请求参数**

**返回参数**

| 参数名 | 类型 | 参数说明 |
| ------ | ---- | -------- |
| id     | Int  |          |


## 8.5 获取产品产量信息

**URL**

/api_3/product_output

**请求方法**

GET

**请求参数**

| 参数名          | 类型 | 参数说明               |
| --------------- | ---- | ---------------------- |
| Per_Page_Counts | int  | 分页每页显示数，默认10 |
| Page_Counts     | int  | 页码，默认0            |
| Production_Batch | str  | 生产批次 |
| Product_Name       | str | 产品名称 |

**返回参数**

| 参数名            | 类型 | 参数说明 |
| ----------------- | ---- | -------- |
| id                | int  |          |
| Product_id        | int  | 产品主键 |
| Total_Amount      | int  | 产量     |
| Meter_Superior_id | int  | 机器主键 |
| Time_Start        | str  | 开始时间 |
| Time_End          | str  | 结束时间 |
| Create_Time       | str  | 录入时间 |
| ProductBatch_id   | str  | 生产批次主键 |

## 8.6 录入产品产量信息

**URL**

/api_3/product_output

**请求方法**

POST

**请求参数**

**返回参数**

| 参数名            | 类型 | 是否必须 | 参数说明   |
| ----------------- | ---- | -------- | ---------- |
| Product_id        | int  | 是       | 产品主键id |
| Total_Amount      | int  | 是       | 产量       |
| Meter_Superior_id | int  | 是       | 机器主键id |
| Time_Start        | str  | 是       | 开始时间   |
| Time_End          | str  | 是       | 结束时间   |
| ProductBatch_id   | int  | 是       | 生产批次主键id |
## 8.7 修改产品产量信息

**URL**

/api_3/product_output

**请求方法**

PUT

**请求参数**

**返回参数**

| 参数名            | 类型 | 是否必须 | 参数说明   |
| ----------------- | ---- | -------- | ---------- |
| id                | int  | 是       |            |
| Product_id        | int  | 是       | 产品主键id |
| Total_Amount      | int  | 是       | 产量       |
| Meter_Superior_id | int  | 是       | 机器主键id |
| Time_Start        | str  | 是       | 开始时间   |
| Time_End          | str  | 是       | 结束时间   |
| ProductBatch_id   | int  | 是       | 生产批次主键id |

## 8.8 删除产品产量信息

**URL**

/api_3/product_output

**请求方法**

DELETE

**请求参数**

**返回参数**

| 参数名 | 类型 | 是否必须 | 参数说明 |
| ------ | ---- | -------- | -------- |
| id     | int  | 是       |          |

## 8.9 获取产品产量统计信息

**URL**

/api_3/product_output_energy_statistic

**请求方法**

GET

**请求参数**

| 参数名         | 类型     | 是否必须 | 参数说明                                                     |
| -------------- | -------- | -------- | ------------------------------------------------------------ |
| Time_Type      | str      | 是       | 时间类型，1-年，2-月，3-天                                   |
| Time_Start     | datetime | 是       | 查询开始时间，"2019-04-01 00:00:00"                          |
| Time_End       | datetime | 是       | 查询结束时间，"2019-04-02 00:00:00"                          |
| Product_Name   | str      | 否       | 根据产品名称筛选                                             |
| Meter_Superior | str      | 否       | 根据机器名称筛选                                             |
| Is_Order       | int      | 否       | 根据总量排序(仅当`Return_Format`为1时可进行排序)             |
| Order_Type     | int      | 否       | 1: 升序, 2:降序                                              |
| Limit          | int      | 否       | 返回数据个数                                                 |
| Summary_Type   | int      | 是       | 0:不汇总, 1: 根据产品汇总, 2: 根据机器汇总                   |
| Return_Format  | int      | 是       | 1:返回总量, 2: 返回详细总量(查天, 返回每小时的值)            |
| Amount_Type    | int      | 是       | 返回总量的类型1:产量, 2:某能源能耗, 3:综合耗能, 4: 某能源单品能耗, 5:综合单品能耗 |
| Energy_Type    | str      | 否       | 能源类型, 当Amount_Type为2和4是必填                          |

返回参数

| 参数名         | 类型 | 参数说明 |
| -------------- | ---- | -------- |
| Product_Name   | str  | 产品名称 |
| Meter_Superior | str  | 机器名称 |
| Time           | str  | 时间下标 |
| Total_Amount   | int  | 总量     |
## 8.10 获取生产批次

**URL**

/api_3/productsBatch

**请求方法**

GET

**请求参数**

| 参数名          | 类型 | 参数说明               |
| --------------- | ---- | ---------------------- |
| Per_Page_Counts | int  | 分页每页显示数，默认10 |
| Page_Counts     | int  | 页码，默认0            |



**返回参数**

| 参数名           | 类型 | 参数说明 |
| ---------------- | ---- | -------- |
| id               | Int  |          |
| Production_Batch | str  | 生产批次 |
| Time_Start       | time | 开始时间 |
| Time_End         | time | 结束时间 |

## 8.11 添加生产批次

**URL**

/api_3/productsBatch

**请求方法**

POST

**请求参数**

**返回参数**

| 参数名       | 类型 | 是否必须 | 参数说明 |
| ------------ | ---- | -------- | -------- |
| Production_Batch | str  | 生产批次 ||
| Time_Start       | time | 开始时间 ||
| Time_End         | time | 结束时间 ||
## 8.12 修改生产批次

**URL**

/api_3/productsBatch

**请求方法**

PUT

**请求参数**

**返回参数**

| 参数名       | 类型 | 是否必须 | 参数说明 |
| ------------ | ---- | -------- | -------- |
| id           | Int  | 是       |          |
| Production_Batch | str  | 生产批次 ||
| Time_Start       | time | 开始时间 ||
| Time_End         | time | 结束时间 ||
## 8.13 删除生产批次

**URL**

/api_3/productsBatch

**请求方法**

DELETE

**请求参数**

**返回参数**

| 参数名 | 类型 | 参数说明 |
| ------ | ---- | -------- |
| id     | Int  |          |

## 8.14 获取批次产量统计信息

**URL**

/api_3/productsBatch_output_energy_statistic

**请求方法**

GET

**请求参数**

| 参数名           | 类型 | 是否必须 | 参数说明                                                     |
| ---------------- | ---- | -------- | ------------------------------------------------------------ |
| Production_Batch | str  | 是       | 根据批次名称筛选                                             |
| Product_Name     | str  | 否       | 根据产品名称筛选                                             |
| Meter_Superior   | str  | 否       | 根据机器名称筛选                                             |
| Is_Order         | int  | 否       | 根据总量排序可进行排序)，1:排序，0:不排序                    |
| Order_Type       | int  | 否       | 1: 升序, 2:降序                                              |
| Limit            | int  | 否       | 返回数据个数                                                 |
| Summary_Type     | int  | 是       | 0:不汇总, 1: 根据产品汇总, 2: 根据机器汇总,3 根据批次名称汇总 |
| Amount_Type      | int  | 是       | 返回总量的类型1:产量, 2:某能源能耗, 3:综合耗能, 4: 某能源单品能耗, 5:综合单品能耗，6:生产效率 |
| Energy_Type      | str  | 否       | 能源类型, 当Amount_Type为2和4是必填                          |

返回参数

| 参数名           | 类型 | 参数说明 |
| ---------------- | ---- | -------- |
| Production_Batch | str  | 批次名称 |
| Product_Name     | str  | 产品名称 |
| Meter_Superior   | str  | 机器名称 |
| Total_Amount     | int  | 总量     |

## 9.1 小程序用户信息绑定

**URL**

/api_3/xcx_info_bind

**请求方法**

POST

**请求参数**

| 参数名        | 类型 | 是否必须 | 参数说明 |
| ------------- | ---- | -------- | -------- |
| code          | str  | 是       |          |
| encryptedData | str  | 是       |          |
| iv            | str  | 是       |          |

## 9.2 获取省市关系

**URL**

/api_3/province_city_list

**请求方法**

GET

**请求参数**

**返回参数**

| 参数名        | 类型 | 参数说明                 |
| ------------- | ---- | ------------------------ |
| Province_Name | str  | 省名                     |
| City_List     | List | [{“City_Name”:”常州市”}] |





附录Ⅰ项目开发名词说明

|      | 缩写                 | 说明                                                                                                      |
|------|----------------------|-----------------------------------------------------------------------------------------------------------|
| 用户 | Usr_Name             | 用户名称                                                                                                  |
|      | Usr_Password         | 用户密码                                                                                                  |
|      | Usr_ID               | 用户ID                                                                                                    |
|      | Usr_Email            | 用户邮箱                                                                                                  |
|      | Usr_Phone            | 用户联系方式                                                                                              |
|      | Usr_Company          | 用户公司名称                                                                                              |
|      | Usr_Description      | 用户描述                                                                                                  |
|      | is_active            | 用户状态，是否激活，在线，离线                                                                            |
|      | Usr_MQTT_Password    | 用户MQTT密码                                                                                              |
|      | Usr_MQTT_Subject     | 用户MQTT主题                                                                                              |
| 设备 | Dev_ID               | 设备ID                                                                                                    |
|      | Old_Dev_ID           | 原设备ID                                                                                                  |
|      | Dev_Name             | 设备名称                                                                                                  |
|      | DevCreate_Time       | 设备创建时间                                                                                              |
|      | DevUpdate_Time       | 设备修改时间                                                                                              |
|      | Dev_State            | 设备运行状态                                                                                              |
|      | Dev_Description      | 设备描述                                                                                                  |
| 测点 | Measure_ID           | 测点ID                                                                                                    |
|      | Measure_Name         | 测点名称                                                                                                  |
|      | MeasureDataFlow_Name | 测点数据流名称                                                                                            |
|      | Measure_Unit         | 测点单位                                                                                                  |
|      | MeasureCreate_Time   | 测点创建时间                                                                                              |
|      | MeasureUpdate_Time   | 测点修改时间                                                                                              |
|      | Measure_State        | 测点状态                                                                                                  |
|      | Measure_Description  | 测点描述                                                                                                  |
|      | Measure_DataType     | 测点数据类型，0：状态值；1：数据值                                                                        |
|      | Measure_TotalState   | 测点值统计，0：不记录；1：记录                                                                            |
|      | Measure_LowerLimit   | 测点数据下限值                                                                                            |
|      | Measure_UpperLimit   | 测点数据上限值                                                                                            |
|      | Measure_Icon         | 测点图标                                                                                                  |
|      | Measure_SwitchState  | 表示设备运行的测点                                                                                        |
| 请求 | Sreach_Where         | 搜索条件，字段名                                                                                          |
|      | Per_Page_Counts      | 每页显示条数，默认10                                                                                      |
|      | Page_Counts          | 页数，默认1                                                                                               |
|      | Start_Date           | 开始时间，格式："2019-04-01 13:53:59"，指定Timestamp时无效                                                |
|      | End_Date             | 结束时间，格式："2019-04-01 13:53:59"，指定Timestamp时无效                                                |
|      | Measure_Names        | 要查询的测点名称，以逗号隔开                                                                              |
|      | Order_By             | 排序名称                                                                                                  |
|      | Order_Way            | 排序方式‘asc’,’desc’,默认asc                                                                              |
|      | Limits               | 请求数量，默认为所有数据                                                                                  |
|      | Timestamp            | 指定单个时间的一条数据，格式"2019-04-01 13:53:59"，如果这个时间没有数据，就返回这之前时间最接近的一条数据 |
| 返回 | Measure_Name1...n    | 测点名称                                                                                                  |
|      | Station_ongitude     | 2G模块的基站经度                                                                                          |
|      | Station_latitude     | 2G模块的基站纬度                                                                                          |
|      | LONGITUDE            | GPS模块的经度                                                                                             |
|      | LATITUDE             | GPS模块的纬度                                                                                             |
|      | Timestamp            | 一条数据的时间                                                                                            |
|      | Total_Numbers        | 返回数据的总条数                                                                                          |
|      | Picture_URL          | 图片URL                                                                                                   |
|      | Err_No               | 返回码                                                                                                    |
|      | Err_Msg              | 返回信息                                                                                                  |
|      | Data                 | 返回数据                                                                                                  |
| 操作 | Operate_Number       | 操作码，‘1’，‘2’，‘3’，‘4’,‘5’                                                                            |
|      | Send_Text            | 发送内容，透传                                                                                            |

附录Ⅱ 告警信息说明

| Err_No | 说明 |
|--------|------|
| 0      | 正常 |
| 1      | 告警 |
| \-1    | 异常 |

附录Ⅲ 日志信息说明

| 级别    | Err_Msg      |
|---------|--------------|
| error   | 获取数据失败 |
| error   | xx操作失败   |
| warning | SIM卡异常    |
| success | xx操作成功   |
| info    | 用户登录     |
| info    | 用户退出     |

附录Ⅳ 通用状态码说明

| Err_NO | Err_Msg                  |
|--------|--------------------------|
| 4001   | 数据库查询出错           |
| 4002   | 无数据                   |
| 4003   | 数据已存在               |
| 4004   | 数据错误                 |
| 4101   | 用户未登录               |
| 4102   | 用户登录失败             |
| 4103   | 参数错误                 |
| 4104   | 用户不存在               |
| 4105   | 用户权限不足             |
| 4106   | 密码错误                 |
| 4107   | 数据库记录新增或修改出错 |
| 4201   | 非法请求或请求次数受限   |
| 4202   | IP受限                   |
| 4302   | 文件读写错误             |
| 4501   | 未知错误                 |

{"./":{"url":"./","title":"Introduction","keywords":"","body":"Introduction hello Copyright © lijiam 2019 all right reserved，powered by Gitbook本书发布时间： 2020-08-14 10:08:13 "},"part1/接口文档广益0.2.html":{"url":"part1/接口文档广益0.2.html","title":"广益项目接口","keywords":"","body":"接口文档 ·无基本参数 ·基本返回内容如下 ·收发格式默认JSON 返回格式如下 { “Err_No”: “0”, “Err_Msg”: “ok” } 带数据 { “Err_No”: “0”, “Err_Msg”: “ok”, “Data”: [{},], “Total_Numbers”：“” } 1.用户相关 1.1 用户注册 URL /api/users （生成用户唯一主题，mqtt登录密码，个人信息添加，建立用户数据库） 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 是 用户名称 Usr_Password str 是 用户密码 Usr_Email str 是 用户邮箱 Usr_MQTT_Password str 是 mqtt密码 Usr_Phone str 否 用户联系方式 Usr_Company str 否 公司 Usr_Description str 否 用户描述 返回参数 1.2 用户登录 URL /api/auth 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 是 Usr_Password str 是 返回参数 参数名 类型 参数说明 Usr_Name str 用户名 Usr_ID str 用户唯一标识 Is_Superuser int 0,1 Is_Firm int 0,1 1.3 获取用户个人信息 URL /api/users 请求方法 GET 请求参数 无 返回参数 参数名 类型 参数说明 Usr_Name str 用户名 Usr_State str 用户是否激活，默认激活 Usr_ID str 用户唯一标识 Usr_Email str Usr_Company str Usr_Phone Usr_Description str 描述 Usr_MQTT_Subject str Is_Superuser int 0,1 Is_Firm int 0,1,1表示是厂商用户，0表示是普通用户 1.4 获取当前公司所有用户信息 URL /api/allusers 请求方法 GET 请求参数 无 返回参数 参数名 类型 参数说明 Usr_Name str 用户名 Usr_State str 用户是否激活，默认激活 Usr_ID str 用户唯一标识 Usr_Email str Usr_Company str Usr_Phone Usr_Description str 描述 Usr_MQTT_Subject str Is_Superuser int 0,1 1.5修改用户个人信息 URL /api/users 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 是 Usr_ID str 是 用户唯一标识 Usr_Email str 是 Usr_Phone str 否 Usr_Company str 否 公司 Usr_Description str 否 返回参数 1.5.1删除用户 URL /api/users 请求方法 DELETE 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 是 Usr_ID str 是 用户唯一标识 返回参数 1.5.2修改用户密码 URL /api/modifyPassword 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 否 Usr_ID str 是 用户唯一标识 Origin_Password str 是 原始密码 Usr_Password str 是 密码 返回参数 1.6退出登录 URL /api/auth 请求方法 DELETE 请求参数 返回参数 用户日志 1.7.1 获取用户日志 URL /api/userlogs 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Start_Date str 否 默认当天0点，格式：\"2019-04-01 13:53:59\" End_Date str 否 默认当前时间，格式:\"2019-04-01 13:53:59\" Order_By str 否 默认以TimeStamp排序 Order_Way str 否 ‘asc’,’desc’,默认desc Limits str 否 数据条数，默认所有 Usr_ID str 是 用户id Per_Page_Counts int 否 默认20 Page_Counts int 否 默认0代表所有 Usr_Name str 否 默认所有，可以多选，‘,’相连 Module str 否 默认所有，可以多选，‘,’相连 Result str 否 默认所有，可以多选，‘,’相连 返回参数 参数名 类型 参数说明 Timestamp str 时间 Usr_Name str 用户名，可以为空 Module str 操作的模块，分为'用户'、'设备'、'测点'、'数据'、'数据库'，可以为空 Detail str 详细操作内容，可以为空 Result str 操作结果，共3种'成功'、'异常'、'告警'，不能为空 Message str 结果说明，可以为空 1.7.2 发送日志 URL /api/userlogs 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Module str 是 日志模块 Detail str 是 日志操作内容 Result str 是 日志操作结果，'成功','异常','告警' Message str 是 结果信息说明 返回参数 用户权限 1.8.1 获取用户权限 URL /api/userpermission 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 是 用户id Usr_Name str 是 用户名称 返回参数 参数名 类型 参数说明 Usr_ID Usr_Name 权限值1。。。。 str 1为有权限，0为没有权限 权限值n。。。。 str 1为有权限，0为没有权限 1.8.2 更改用户权限 URL /api/userpermission 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 是 用户id Usr_Name str 是 用户名称 权限值1。。。。 str 是 1为有权限，0为没有权限 权限值n。。。。 str 是 1为有权限，0为没有权限 1.9 获取使用某品牌的所有公司列表 URL /api/allusers_by_brand 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Dev_Brand str 否 品牌名称,不传返回所有公司 返回参数 参数名 类型 参数说明 Usr_Company str 公司名称 Usr_ID str 公司ID 1.10 获取指定用户的平台页面展示权限 URL /api/user_page_permission 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 是 用户id Usr_Name str 是 用户名称 返回参数 参数名 类型 参数说明 Usr_ID Usr_Name 权限值1。。。。 str 1为有权限，0为没有权限 权限值n。。。。 str 1为有权限，0为没有权限 1.11 修改指定用户的平台页面展示权限 URL /api/user_page_permission 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 是 用户id Usr_Name str 是 用户名称 返回参数 参数名 类型 参数说明 Usr_ID Usr_Name 权限值1。。。。 str 1为有权限，0为没有权限 权限值n。。。。 str 1为有权限，0为没有权限 2.设备相关 2.1.1添加设备 URL /api/devs 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_Name str 是 设备名 Dev_ID str 是 设备唯一ID Dev_Description str 否 设备描述 Dev_Brand str 否 设备所属品牌，用户可选可填 返回参数 设备task_id 2.1.2复制设备 URL /api/copy_devs 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备ID Copy_Number int 是 生成数量 Prefix_Name str 是 前缀名 Suffix_Start_Number int 是 后缀起始值 返回参数 2.2.1添加设备测点（生成设备数据记录表） URL /api/measurePoints 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备id Measure_Name str 是 测点名 MeasureDataFlow_Name str 是 数据流名称 Measure_DataType str 是 测点数据类型，0：状态值；1：数据值 Measure_TotalState str 否 测点值统计，0：不记录；1：记录，默认0 Measure_SwitchState str 否 '1'表示该测点为开关测点，默认为'0',已有开关测点添加值为'1'会失败 Measure_Unit str 否 数据单位，默认为空 Measure_Descriptions str 否 设备描述 Measure_LowerLimit str 否 测点数据下限值，默认为空 Measure_UpperLimit str 否 测点数据上限值，默认为空 Measure_Icon_Nomal str 是 图标的URL，正常显示 Measure_Icon_Overrun str 是 图标的URL,超限时显示 返回参数 测点Measure_ID 2.2.2获取设备最新运行状态 URL /api/devstateRT 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备id，默认为空，返回所有设备信息，不为 返回参数 参数名 类型 参数说明 Dev_SwitchState Str 设备运行状态,'0':'关机','1':'运行', '2':'未确定' 2.2.3导入设备测点（excel） URL /api/measurePoints_import 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Dev_ID str 是 MeasurePoints_Datas file 是 xlsx格式文件 返回参数 2.3获取设备配置参数 URL /api/devs #获取所有设备配置信息 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Per_Page_Counts str 否 分页每页显示数，默认10 Page_Counts str 否 页码，默认0 Search_Where str 否 搜索字段，指定获取单个设备时无效 Dev_ID str 是 设备id，默认为空，返回所有设备信息，不为 Dev_Brand str 否 返回符合品牌的设备，不传默认返回所有品牌（本公司品牌名’Usr_Description’） 返回参数 参数名 类型 参数说明 Dev_Name Str 设备名称 Dev_State str 网关运行状态，1在线，0离线，-1故障 Dev_Real_State str 设备状态 1开机0关机 Dev_Description str 设备描述 Dev_ID str 设备id DevCreate_Time str 记录创建时间 DevUpdate_Time str 记录修改时间 LONGITUDE str 实时经度 LATITUDE str 实时纬度 Station_longitude str 基站经度 Station_latitude str 基站纬度 Dev_Brand str 设备品牌 Timestamp str 最新数据时间 Dev_Push str 设备使用者 2.3.1 设备派发 URL /api/distribute_devs 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Dev_ID str 是 设备id，多个用'，'隔开 Dev_Push str 是 设备使用者 返回参数 2.4获取设备测点配置参数 URL /api/measurePoints 获取指定设备的所有测点信息 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备id Per_Page_Counts str 否 分页每页显示数，默认10 Page_Counts str 否 页码，默认0 Search_Where str 否 搜索字段，指定获取单个时无效 Measure_State_Now str 否 返回测点即时状态，数据，图标，值为'1'才返回，默认1 返回参数 参数名 类型 参数说明 Measure_Name str 测点名称 MeasureDataFlow_Name str 测点数据流名称 Measure_Unit str 数据单位 MeasureCreate_Time str 测点创建时间 MeasureUpdate_Time str 测点最后修改时间 Measure_State str 测点状态 ，'2'表示有数据但是保存出错 Measure_Description str 测点描述 Measure_ID str 测点ID Measure_Icon_Nomal str 测点图标URL Measure_Icon_Overrun str 测点图标URL超限 Measure_DataType str 测点数据类型，0：状态值；1：数据值 Measure_TotalState str Measure_SwitchState str '1'表示该测点为开关测点，默认为'0',已有开关测点添加值为'1'会失败 Measure_LowerLimit str Total_Amount str Measure_UpperLimit str Measure_LineColor str 2.4.1获取设备测点实时信息 URL /api/measurePointsRT 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备id Measure_Names str 否 显示测点表，默认所有测点数据，以逗号隔开 返回参数 参数名 类型 参数说明 Measure_Name str 测点名称 Measure_Data str 测点数据 Measure_Unit str 数据单位 Measure_State str 测点状态 Measure_Icon str 测点图标URL 2.5获取设备记录数据 URL /api/devsdatas 获取指定设备的记录 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Start_Date str 否 默认当天0点，格式：\"2019-04-01 13:53:59\"，指定timestamp,id时无效 End_Date str 否 默认当前时间，格式：\"2019-04-01 13:53:59\"，指定timestamp,id时无效 Measure_Names str 否 显示测点表，默认所有测点数据，以逗号隔开 Order_By str 否 默认以TimeStamp排序 Order_Way str 否 ‘asc’,’desc’,默认asc Limits str 否 数据条数，默认所有 Dev_ID str 是 设备id Timestamp str 否 指定单条数据，格式\"2019-04-01 13:53:59\" Per_Page_Counts int 否 默认10 Page_Counts int 否 默认0代表所有 返回参数 参数名 类型 参数说明 ...... str 测点1数据 ...... Str 测点2数据 LONGITUDE str 实时经度 LATITUDE str 实时纬度 Station_longitude str 基站经度 Station_latitude str 基站纬度 Timestamp str 时间 2.5.1获取设备全天记录数据 URL /api/devsdaydatas 获取指定设备的记录 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Start_Date str 否 默认当天0点，格式：\"2019-04-01 00:00:00\"， End_Date str 否 默认当天24点，格式：\"2019-04-01 23:53:59\"， Measure_Names str 否 显示测点表，默认所有测点数据，以逗号隔开 Order_By str 否 默认以TimeStamp排序 Order_Way str 否 ‘asc’,’desc’,默认asc Dev_ID str 是 设备id 返回参数 参数名 类型 参数说明 ...... str 测点1数据 ...... Str 测点2数据 Timestamp str 时间 2.5.2获取设备记录数据，地图显示 URL /api/devsmapdatas 获取指定设备的记录 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Start_Date str 否 默认当天0点，格式：\"2019-04-01 13:53:59\"，指定timestamp,id时无效 End_Date str 否 默认当前时间，格式：\"2019-04-01 13:53:59\"，指定timestamp,id时无效 Measure_Names str 否 显示测点表，默认所有测点数据，以逗号隔开 Order_By str 否 默认以TimeStamp排序 Order_Way str 否 ‘asc’,’desc’,默认asc Limits str 否 数据条数，默认所有 Dev_ID str 是 设备id 返回参数 参数名 类型 参数说明 ...... str 测点1数据 ...... Str 测点2数据 LONGITUDE str 实时经度 LATITUDE str 实时纬度 Station_longitude str 基站经度 Station_latitude str 基站纬度 Is_Fixed int 0,1 1：修正过 Timestamp str 时间 2.6修改设备配置参数 URL /api/devs/ 请求方法 PUT 请求参数（form） 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_Name str 是 设备名 Dev_ID str 是 设备唯一ID Dev_Description str 否 设备描述 Old_Dev_ID str 是 原设备ID Dev_Brand str 否 所属品牌 返回参数 2.7修改设备测点，修改单个 URL /api/measurePoints/ 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备id Measure_ID str 是 测点主键id Measure_Name str 是 测点名 MeasureDataFlow_Name str 是 数据流名称 Measure_DataType str 是 测点数据类型，0：状态值；1：数据值 Measure_TotalState str 否 测点值统计，0：不记录；1：记录，默认0 Measure_SwitchState str 否 '1'表示该测点为开关测点，默认为'0',已有开关测点添加值为'1'会失败 Measure_Unit str 否 数据单位，默认为空 Measure_Descriptions str 否 设备描述 Measure_LowerLimit str 否 测点数据下限值，默认为空 Measure_UpperLimit str 否 测点数据上限值，默认为空 Measure_Icon_Nomal str 是 图标的URL Measure_Icon_Overrun str 是 图标的URL,超限 返回参数 2.8删除设备测点，可删除多个（不删除表已有数据） URL /api/measurePoints 请求方法 DELETE 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备主键id Measure_ID str 是 测点主键id,多个用','相连 返回参数 2.9删除设备，（不删除表已有数据） URL /api/devs 请求方法 DELETE 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备id,多个用','相连 返回参数 2.10利用mqtt控制设备 URL /api/mqttcontroll 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备id Operate_Number str 是 操作码‘1’，‘2’，‘3’，‘4’，‘5’ Send_Text str 否 透传内容 返回参数 2.11获取图片 URL /api/photos 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备id Timestamp str 否 时间戳，格式\"2019-04-01 13:53:59\"，返回最近一张图片 返回参数 参数名 类型 参数说明 URL str 图片地址 Timestamp str 拍摄时间 2.12获取所有图标资源 URL /api/icons 请求方法 GET 请求参数 返回参数 参数名 类型 参数说明 Icon_Name str 图标名称 Icon_URL str 图标地址 Icon_Type str 图标类型，'1'表示蓝色，'0'表示红色 2.13发送获取网关当前配置请求 URL /api/gateway 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备id 返回参数 2.14查看获取网关当前配置结果 URL /api/gateway 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备id 返回参数 参数名 类型 参数说明 Is_Success str '1'获取成功,'0'获取失败,'-1'结果未知 Message str 信息说明 2.15发送升级网关请求 URL /api/upgrade 请求方法 POST 请求参数 返回参数 2.16查看升级结果 URL /api/upgrade 请求方法 GET 请求参数 返回参数 参数名 类型 参数说明 Usr_ID str 否 默认本用户 Is_Success str '1'升级成功,'0'升级失败,'-1'结果未知 Message str 信息说明 2.17 上传文件 URL /api/upload 请求方法 POST 请求参数 返回参数 2.18 获取设备网关配置的更新信息 URL /api/updatemsg 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Per_Page_Counts str 否 分页每页显示数，默认10 Page_Counts str 否 页码，默认0 Search_Where str 否 搜索字段，指定获取单个设备时无效 Dev_ID str 否 设备id，默认为空，返回所有设备信息，不为 返回参数 参数名 类型 参数说明 Dev_ID str 设备ID Dev_Name str 设备名称 Update_Time str 更新时间 2.19 添加图标 URL /api/icons 请求方法 POST（表单） 请求参数 参数名 类型 是否必须 参数说明 Icon_Name str 是 图标名称 Icon_File_Nomal file 是 测点正常显示图标文件 Icon_File_Overrun file 是 测点异常显示图标文件 返回参数 2.20 删除图标 URL /api/icons 请求方法 DELETE 请求参数 参数名 类型 是否必须 参数说明 Icon_Name str 是 图标名称 返回参数 数据相关 3.1 获取某时间段设备各个状态的总时间 URL /api/statustime 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Start_Date str 否 默认当天0点，格式：\"2019-04-01 13:53:59\"， End_Date str 否 默认当天23:59，格式：\"2019-04-01 13:53:59\"， Dev_ID str 是 设备id 返回参数 参数名 类型 参数说明 Status_Name str 设备状态名 Total_Time str 总时间 3.2 获取某时间段设备的所有状态数据（简化，作图专用） URL /api/statuschartdatas 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Start_Date str 否 默认当天0点，格式：\"2019-04-01 13:53:59\"， End_Date str 否 默认当天23:59，格式：\"2019-04-01 13:53:59\" Dev_ID str 是 设备id 返回参数 参数名 类型 参数说明 Status_Name str 设备状态名 Time str 时间，格式\"2019-04-01 13:53:59\" Message str 异常时的提示信息，其他状态没有 3.3 获取设备所有状态判断规则 URL /api/statusrule 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备id 返回参数 参数名 类型 参数说明 id int 主键id Rule_Name str 规则名称 Status_Name str 状态名称 Measure_Name str 测点名称 Formula str 计算公式 3.4 添加状态判断规则 URL /api/statusrule 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 Dev_ID str 是 设备id Rule_Name str 是 规则名,例:'开机规则1' Status_Name str 是 状态名,例:'开机' Measure_Name str 是 测点名 Formula str 是 公式，例:'100\\ 返回参数 3.5 修改状态判断规则 URL /api/statusrule 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 id int 是 主键id Dev_ID str 是 设备id Rule_Name str 是 规则名 Status_Name str 是 状态名 Measure_Name str 是 测点名 Formula str 是 公式 返回参数 3.6 删除状态判断规则 URL /api/statusrule 请求方法 DELETE 请求参数 参数名 类型 是否必须 参数说明 Usr_ID str 否 默认本用户 id int 是 主键id Dev_ID str 是 设备id 返回参数 3.7 获取某月有数据的天 URL /api/date_with_data 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Time str 是 某月 Dev_ID str 是 返回参数 参数名 类型 参数说明 Date_List list 日期合集 附录Ⅰ 项目开发名词说明 缩写 说明 用户 Usr_Name 用户名称 Usr_Password 用户密码 Usr_ID 用户ID Usr_Email 用户邮箱 Usr_Phone 用户联系方式 Usr_Company 用户公司名称 Usr_Description 用户描述 is_active 用户状态，是否激活，在线，离线 Usr_MQTT_Password 用户MQTT密码 Usr_MQTT_Subject 用户MQTT主题 设备 Dev_ID 设备ID Old_Dev_ID 原设备ID Dev_Name 设备名称 DevCreate_Time 设备创建时间 DevUpdate_Time 设备修改时间 Dev_State 设备运行状态 Dev_Description 设备描述 测点 Measure_ID 测点ID Measure_Name 测点名称 MeasureDataFlow_Name 测点数据流名称 Measure_Unit 测点单位 MeasureCreate_Time 测点创建时间 MeasureUpdate_Time 测点修改时间 Measure_State 测点状态 Measure_Description 测点描述 Measure_DataType 测点数据类型，0：状态值；1：数据值 Measure_TotalState 测点值统计，0：不记录；1：记录 Measure_LowerLimit 测点数据下限值 Measure_UpperLimit 测点数据上限值 Measure_Icon 测点图标 Measure_SwitchState 表示设备运行的测点 请求 Sreach_Where 搜索条件，字段名 Per_Page_Counts 每页显示条数，默认10 Page_Counts 页数，默认1 Start_Date 开始时间，格式：\"2019-04-01 13:53:59\"，指定Timestamp时无效 End_Date 结束时间，格式：\"2019-04-01 13:53:59\"，指定Timestamp时无效 Measure_Names 要查询的测点名称，以逗号隔开 Order_By 排序名称 Order_Way 排序方式‘asc’,’desc’,默认asc Limits 请求数量，默认为所有数据 Timestamp 指定单个时间的一条数据，格式\"2019-04-01 13:53:59\"，如果这个时间没有数据，就返回这之前时间最接近的一条数据 返回 Measure_Name1...n 测点名称 Station_ongitude 2G模块的基站经度 Station_latitude 2G模块的基站纬度 返回数据的总条数 图片URL Err_No 返回码 Err_Msg 返回信息 Data 返回数据 操作 Operate_Number 操作码，‘1’，‘2’，‘3’，‘4’,‘5’ Send_Text 发送内容，透传 附录Ⅱ 告警信息说明 Err_No 说明 0 正常 1 告警 -1 异常 附录Ⅲ 日志信息说明 级别 Err_Msg error 获取数据失败 error xx操作失败 warning SIM卡异常 success xx操作成功 info 用户登录 info 用户退出 附录Ⅳ 通用状态码说明 Err_NO Err_Msg 4001 数据库查询出错 4002 无数据 4003 数据已存在 4004 数据错误 4101 用户未登录 4102 用户登录失败 4103 参数错误 4104 用户不存在 4105 用户权限不足 4106 密码错误 4107 数据库记录新增或修改出错 4201 非法请求或请求次数受限 4202 IP受限 4302 文件读写错误 4501 未知错误 Copyright © lijiam 2019 all right reserved，powered by Gitbook本书发布时间： 2020-08-14 14:09:20 "},"part2/昊云平台能耗接口.html":{"url":"part2/昊云平台能耗接口.html","title":"能耗项目接口","keywords":"","body":"接口文档 ·无基本参数 ·基本返回内容如下 ·收发格式默认JSON 返回格式如下 { “Err_No”: “0”, “Err_Msg”: “ok” } 带数据 { “Err_No”: “0”, “Err_Msg”: “ok”, “Data”: [{},], “Total_Numbers”：“” } 1.1 用户登录 URL /api/auth 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 是 Usr_Password str 是 返回参数 参数名 类型 参数说明 Usr_Name str 用户名 Usr_ID str 用户ID 1.2 退出登录 URL /api/auth 请求方法 DELETE 请求参数 返回参数 1.3 用户注册 URL /api/users 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 是 登录名 Usr_Password str 是 用户密码 Usr_Email str 是 用户邮箱 返回参数 1.4 修改用户信息 URL /api/users 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 id int 是 主键 Usr_Name str 是 登录名 Usr_Email str 是 用户邮箱 Usr_Phone str 否 用户手机 XCX_Title str 否 小程序标题 Usr_Company str 否 用户公司 Usr_Province str 否 所属省 Usr_City str 否 所属市 Usr_Detail_Addr str 否 用户详细地址 Usr_Area str 否 所属区 返回参数 1.5 获取用户信息 URL /api/users 请求方法 GET 请求参数 参数名 类型 参数说明 id int 主键 Usr_Name str 登录名 Usr_Email str 用户邮箱 Usr_Phone str 用户手机 XCX_Title str 小程序标题 Usr_Company str 用户公司 Usr_Province str 所属省 Usr_City str 所属市 Usr_Detail_Addr str 用户详细地址 Usr_Area str 所属区 请求参数 2.1 新增仪表 URL /api_3/meters 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Meter_Name str 是 仪表名 Meter_Type str 是 仪表类型 Meter_Superior_id str 是 所属机器的id Meter_Remarks str 否 仪表备注 Meter_TotalAmount Str 否 换表前累计总量 Meter_IsVirtual str 否 是否为虚拟表，默认'0' Meter_Formula str 否 虚拟表计算公式，默认'' Meter_IsTotal str 否 是否为总表，默认'0' Meter_IsCount str 否 是否统计，默认'0' Is_HandWork int 否 是否手工填报,默认0 返回参数 参数名 类型 参数说明 id int 2.2 修改仪表 URL /api_3/meters 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 id int 是 主键 Meter_Name str 是 仪表名 Meter_Type str 是 仪表类型 Meter_Superior_id int 是 所属机器的id Meter_Remarks str 否 仪表备注 Meter_TotalAmount Str 否 换表前累计总量 Meter_IsVirtual str 否 是否为虚拟表，默认'0' Meter_Formula str 否 虚拟表计算公式，默认'' Meter_IsTotal str 否 是否为总表，默认'0' Meter_IsCount str 否 是否统计，默认'0' Is_HandWork int 否 是否手工填报,默认0 返回参数 2.3 获取仪表信息 URL /api_3/meters 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 id int 否 仪表主键 Meter_Type str 否 根基仪表类型筛选 Meter_Superior str 否 根据所属机器的名称筛选 Is_HandWork Int 否 根据是否手工填报筛选 Per_Page_Counts int 否 分页每页显示数 Page_Counts Int 否 页码 Meter_IsCount Int 否 根据是否需要统计筛选 返回参数 参数名 类型 参数说明 id int 主键id Meter_Name str 仪表名 Meter_Type str 仪表类型 Meter_Superior str 所属机器 Meter_Department str 所属部门 Meter_Remarks str 仪表描述 Meter_TotalAmount Str 换表前累计总量 Meter_IsVirtual str 是否为虚拟表，默认0 Meter_Formula str 虚拟表计算公式，默认'' Meter_IsTotal str 是否为总表，默认0 Meter_IsCount str 是否统计，默认0 Is_HandWork int 是否手工填报,默认0 Meter_Superior_id Int 是机器的ID Meter_Parameter str 表的瞬时参数,例如:UA,UB,UC等, 多个用,隔开 2.4 删除仪表 URL /api_3/meters 请求方法 DELETE 请求参数 参数名 类型 是否必须 参数说明 id int 是 主键id 返回参数 2.5 获取所有机器 URL /api_3/metersuperiors 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 id int 否 获取单条 Meter_Department str 否 根据部门筛选 Per_Page_Counts int 否 分页每页显示数 Page_Counts Int 否 页码 返回参数 参数名 类型 参数说明 id Int Meter_Superior str 机器名 Meter_Department str 机器所属部门 Machine_Image_Url str 机器图片 equipmentCode str 重点耗能设备类型 equipmentUnitCode str 重点耗能设备编号 2.6 增加机器 URL /api_3/metersuperiors 请求方法 POST 请求参数 返回参数 参数名 类型 是否必须 参数说明 Meter_Superior str 是 机器名 Meter_Department str 是 机器所属部门 equipmentCode str 是 重点耗能设备类型 equipmentUnitCode str 是 重点耗能设备编号 2.7 修改机器 URL /api_3/metersuperiors 请求方法 PUT 请求参数 返回参数 参数名 类型 是否必须 参数说明 id Int 是 Meter_Superior str 是 机器名 Meter_Department str 是 机器所属部门 equipmentCode str 是 重点耗能设备类型 equipmentUnitCode str 是 重点耗能设备编号 2.8 删除机器 URL /api_3/metersuperiors 请求方法 DELETE 请求参数 返回参数 参数名 类型 参数说明 id Int 2.9 上传机器图片 URL /api_3/metersuperior_image 请求方法 POST 请求参数 返回参数 参数名 类型 参数说明 Meter_Superior_id Int Machine_Image file 3.1 查询能源总耗能 URL /api_3/allenergy 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Time_Type str 是 时间类型，1-年，2-月，3-天 Time_Start str 是 查询开始时间，\"2019-04-01 13:53:59\" Time_End str 是 查询结束时间，\"2019-04-01 13:53:59\" Amount_Type str 是 总量类型，1-按仪表类型查，2-按仪表查 3-按机器查，4-按部门查 Amount_Combination str 否 如果Amount_Type=3或4，这个参数有效，1-按仪表类型查，2-按仪表查，默认1 Amount_SortName str 否 如果Amount_Type=2或3或4，这个参数有效，仪表或机器或部门的名称，默认为所有，多个用‘，’隔开 Amount_Value str 否 具体查询的能源类型，默认为所有，多个用‘，’隔开， 0-电，1-自来水，2-中水，3-热水，4-软水，5-中压蒸汽，6-低压蒸汽，7-空气，8-天然气 返回参数 参数名 类型 参数说明 Meter_Superior str 仪表上级名称 Meter_Name str 仪表名称 Ene_Type str 能源类型 Ene_Name str 能源名称 Total_Amount str 总量 说明：Meter_Superior和Meter_Name没有即为空 3.2 查询详细能源耗能 URL /api_3/detailenergy 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Time_Type str 是 时间类型，1-年，2-月，3-天 Time_Start str 是 查询开始时间，\"2019-04-01 13:53:59\" Time_End str 是 查询结束时间，\"2019-04-01 13:53:59\" Time_Interval str 否 查询时间间隔， 默认值:按年查，间隔为1，单位为月 按月查，间隔为1，单位为天 按天查，间隔为60，单位为分钟 Amount_Type str 是 总量类型，1-按仪表类型查，2-按仪表查,3-按机器查，4-按部门查 Amount_Combination str 否 如果Amount_Type=3或4，这个参数有效，1-按仪表类型查，2-按仪表查，默认1 Amount_SortName str 否 如果Amount_Type=2或3或4，这个参数有效，仪表或机器或部门的名称，默认为所有，多个用‘，’隔开 Amount_Value str 否 具体查询的能源类型，默认为所有，多个用`,`隔开， 0-电，1-自来水，2-中水，3-热水，4-软水，5-中压蒸汽，6-低压蒸汽，7-空气，8-天然气 返回参数 参数名 类型 参数说明 Time str 时间点，\"2019-04-01 13:53:59\" %Y-%M-%D %h:%m:%s Meter_Superior str 仪表上级名称 Meter_Name str 仪表名称 Ene_Type str 能源类型 Ene_Name str 能源名称 Total_Amount str 该时间段内的总量 3.3 测点数据查询 URL /api_3/measure 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Time_Type str 是 时间类型，1-年，2-月，3-天 Meter_Name str 是 仪表名称 Time_Start str 是 查询开始时间，\"2019-04-01 13:53:59\" Time_End str 是 查询结束时间，\"2019-04-01 13:53:59\" Time_Interval str 否 查询时间间隔， 默认值:按年查，间隔为1，单位为月 按月查，间隔为1，单位为天 按天查，间隔为60，单位为分钟 Measure_Name str 否 测点名称，默认所有，多个用‘，’隔开 返回参数 参数名 类型 参数说明 TIme str 时间点，\"2019-04-01 13:53:59\" %Y-%M-%D %h:%m:%s Measure_Name str 测点名称 Measure_Value str 该时间点的值 说明：按年或月查询时，显示结果为平均值 3.4 生成能源报表 URL /api_3/report 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Time_Type str 是 时间类型，1-年，2-月，3-天 Time_Start str 是 查询开始时间，\"2019-04-01 13:53:59\" Time_End str 是 查询结束时间，\"2019-04-01 13:53:59\" Time_Interval str 否 查询时间间隔， 默认值:按年查，间隔为1，单位为月 按月查，间隔为1，单位为天 按天查，间隔为60，单位为分钟 Amount_Type str 是 总量类型，1-按仪表类型查，2-按仪表查,3-按机器查，4-按部门查 Amount_Combination str 否 如果Amount_Type=3或4，这个参数有效，1-按仪表类型查，2-按仪表查，默认1 Amount_SortName str 否 仪表的名称，默认为所有，多个用‘，’隔开 Amount_Value str 否 默认为所有，多个用‘，’隔开， 0-电，1-自来水，2-中水，3-热水，4-软水，5-中压蒸汽，6-低压蒸汽，7-空气，8-天然气 返回参数 参数名 类型 参数说明 File_Name str 文件名称 .xlsx File_Name示例：Year_report2019.xlsx Month_report2019_6.xlsx Day_report2019_6_12.xlsx 3.5 查询详细能源耗能--报表 URL /api_3/form_detailenergy 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Time_Type str 是 时间类型，1-年，2-月，3-天 Time_Start str 是 查询开始时间，\"2019-04-01 13:53:59\" Time_End str 是 查询结束时间，\"2019-04-01 13:53:59\" Time_Interval str 否 查询时间间隔， 默认值:按年查，间隔为1，单位为月 按月查，间隔为1，单位为天 按天查， 间隔为60，单位为分 Amount_Type str 是 总量类型，1-按仪表类型查，2-按仪表查,3-按机器查，4-按部门查 Amount_Combination str 否 如果Amount_Type=3或4，这个参数有效，1-按仪表类型查，2-按仪表查，默认1 Amount_SortName str 否 仪表的名称,默认为所有，多个用‘，’隔开 Amount_Value str 否 具体查询的能源类型，默认为所有，多个用‘，’隔开， 0-电，1-自来水，2-中水，3-热水，4-软水，5-中压蒸汽，6-低压蒸汽，7-空气，8-天然气 返回参数 参数名 类型 参数说明 Meter_Department str 所属部门 Meter_Superior str 仪表上级名称(所属机器) Meter_Name str 仪表名称 Ene_Type str 能源类型 Ene_Name str 能源名称 Detail_Amounts list 各段时间点总量，格式定义: [{ \"Total_Amount\":\"\", \"Time\":\"2019-04-01 13:00:00\" },] 举例说明： { \"Err_No\": \"\", \"Err_msg\":\"\", \"Data\": [ { \"Meter_Department\": \"东车间\", \"Meter_Superior\": \"机器1\", \"Meter_Name\": \"染色工业水表\", \"Ene_Type\": \"1\", \"Ene_Name\": \"自来水\", \"Shift_Amounts\": [{ \"Shift_Name\": \"白班\", \"Shift_Amount\": \"1000\" }, { \"Shift_Name\": \"夜班\", \"Shift_Amount\": \"2000\" }], \"Detail_Amounts\": [{ \"Time\": \"2019-04-01 01:30:00\", \"Total_Amount\": \"10.00\" }, { \"Time\": \"2019-04-01 02:30:00\", \"Total_Amount\": \"20.00\" }, { \"Time\": \"2019-04-01 03:30:00\", \"Total_Amount\": \"30.00\" }, { \"Time\": \"2019-04-01 04:30:00\", \"Total_Amount\": \"40.00\" } ] } ] } 4.1 费率修改 URL /api_3/rate 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 id int 是 Rate_Name str 是 费率名称 Rate_Type str 是 费率类型 Rate_Value str 否 费率值 isSegmentation str 是 是否分段，0-分段，1-不分段 Seg_Begin str 否 开始时间 Seg_Begin_Rate str 否 开始计费值 Seg_End str 否 结束时间 Seg_End_Rate str 否 结束计费值 Rate_Unit str 是 计费单位 返回参数 4.2 费率查询 URL /api_3/rate 请求方法 GET 请求参数 返回参数 参数名 类型 参数说明 id int Rate_Name str 费率名称 Rate_Type str 费率类型 Rate_Value str 费率值 isSegmentation str 是否分段 Seg_Begin str 开始时间 Seg_Begin_Rate str 开始计费值 Seg_End str 结束时间 Seg_End_Rate str 结束计费值 Rate_Unit str 计费单位 4.3 查询个性化设置 URL /api_3/personalise 请求方法 GET 请求参数 返回参数 参数名 类型 参数说明 Year_Start str 年开始月 Year_End str 年结束月 Month_Start str 月开始天 Month_End str 月结束天 Day_Start str 天开始时，格式\"07:30:00\"或\"-07:30:00\" Day_End str 天结束时 4.4 修改个性化设置 URL /api_3/personalise 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 Year_Start str 是 年开始月,默认1表示当年1月, -1表示上年1月 Year_End str 是 年结束月,默认1表示下年1月 -1表示当年1月 Month_Start str 是 月开始天,默认1表示当月1号 -1表示上月1号 Month_End str 是 月结束天,默认1表示下月1号 -1表示当月1号 Day_Start str 是 天开始时格式\"07:30:00\"或\"-07:30:00\" Day_End str 是 天结束时,格式\"07:30:00\"或\"-07:30:00\" 注： -12\\ -31\\ -23\\ 返回参数 5.1 获取省平台基础数据 URL /api_3/PRP_base_infos 请求方法 GET 请求参数 返回参数 参数名 类型 参数说明 collectSystemType List 数据采集来源 collectItemUsage List 采集数据项数据用途 collectItem List 采集数据项 collectSystemType元素的格式如下: { \"code\":\"1\", \"name\":\"管理信息系统\" } collectItemUsage元素的格式如下: { \"code\":\"11\", \"name\":\"购进已消费\" } collectItem元素的格式如下: { \"code\":\"023300\", //能源编码 \"name\":\"电力\", \"unit\":\"千瓦时\", \"zbckz\":\"0.7143\", // 折标系数 } 5.2 上传用能单位基础信息 URL /api_3/PRP_organization_infos 请求方法 PUT 请求 参数名 类型 是否必须 参数说明 collectItemConfig List 是 采集数据项配置 enterprise List 是 用能单位信息 group List 是 集团信息 process List 否 生产工序 processUnit List 否 工序单元 参数 1.{ 2. \"collectItemConfig\": [ // 采集数据项配置 3. { 4. \"name\": \"全厂-二次能源-电力-购进已消费\", // 采集数据项指标名称 ,用户自填 5. \"Meter_id\":12, //对应表的主键 6. \"processCode\": \"00\", // 生产工序, 不填默认为\"00\" 7. \"processUnitCode\": \"00\", // 工序单元 8. \"equipmentCode\": \"00\", // 重点耗能设备类型 9. \"equipmentUnitCode\": \"00\", // 重点耗能设备编号 10. \"Energy_Code\": \"013300\", // 能源编码(必填) 11. \"Real_zbckz\": \"0.7143\", // 能源实际折标系数 12. \"dataUsageCode\": \"11\", // 用途编码(必填) 13. \"inputType\": \"1\", // 数据采集来源(必填) 14. \"statType\": \"1\", //采集频率,0 实时; 1 日; 2 月;3 年 (必填) 15. \"collectSystemName\": \"EXCENERGY 能源采集系统\", // 采集系统名称 16. \"remark\": \"\", // 备注 17. \"scope\": 1 // 范围 1:全厂,2:生产工序,3:生产工序单元,4:重点耗能设备 (必填) 18. } 19. ], 20. \"enterprise\": { // 用能单位信息(必填) 21. \"name\": \"示例钢铁有限责任公司\", // 单位名称(必填) 22. \"typeCode\": \"159\", // 单位类型(必填) 23. \"typeName\": \"其他有限责任公司\", // 单位类型名 24. \"industryCode\": \"C3120\", // 行业编码(必填) 25. \"regionCode\": \"410481\", // 区域编码(必填 6 位到地区级别) 26. \"regionName\": \"示例市\", // 地区名 27. \"center\": false, // 是否央企(必填) 28. \"jgzh\": false, // 是否能源加工转换类企业(必填) 29. \"energyConsumeLevel\": 4, // 1:5000 吨以下, 2:5000~10000 吨,3:1 万-10 万吨,4:10 万-50 万吨,5:50 万-300 万吨,6:300 万吨以上(必填) 30. \"latitude\": 33.283433, // 用能单位主要厂址中心纬度(必填) 31. \"longitude\": 113.505883, // 用能单位主要厂址中心经度(必填) 32. \"phone\": \"0375-8111111\", // 企业联系电话(必填) 33. \"fax\": \"0375-8111111\", // 传真 34. \"email\": \"zxjc@163.com\", // 电子邮箱 35. \"address\": \"河南省示例市人民大道 1 号\", // 地址 36. \"zipCode\": \"462500\", // 邮编 37. \"url\": \"\", // 用能单位网站地址 URL 38. \"fieldCode\": \"100\", // 领域编码,工业:100,交通运输.仓储和邮政业:200,住宿和餐饮业:300,批发和零售业:400,教育:500,其他:600 39. \"fieldName\": \"工业\", // 领域名称 40. \"corporationName\": \"赵钱孙\", // 法人代表 41. \"registerDate\": \"1998-10-10 00:00:00\", // 注册日期 42. \"registerPrincipal\": 10000, // 注册资金,万元 43. \"energyOffice\": \"机电能源部\", // 能管机构名称 44. \"energyOfficial\": \"李周\", // 主管节能领导姓名 45. \"energyOfficialPosition\": \"机电能源部主任\", // 主管节能领导职位 46. \"energyOfficialPhone\": \"18866669999\", // 主管节能领导联系电话 47. \"energyPass\": false, // 是否通过能源管理体系认证 48. \"energyRespName\": \"吴郑\", // 能管负责人姓名 49. \"energyRespPhone\": \"18677778888\", // 能管负责人电话 50. \"passDate\": \"\", // 认证日期 51. \"passOrg\": \"\", // 认证机构 52. \"productionLine\": \"电弧炉生产宽厚板短流程生产线\", //企业主要生产线名称 53. \"leadingProduct\": \"钢板\", //企业主导产品 54. \"remark\": \"企业信息化水平落后,除电力消费数据外,其他数据指标均采用人工填报方式上传\" // 备注 55. }, 56. \"group\": { //集团(非必填) 57. \"name\": \"河北示例钢铁股份有限公司\", // 集团名称 58. \"address\": \"河北省示例市体育南大街 385 号\", // 集团地址 59. \"remark\": \"\" // 备注 60. }, 61. \"process\": [ // 生产工序(非必填) 62. { 63. \"processCode\": \"06\", // 生产工序编码 64. \"processName\": \"电炉工序\", // 生产工序名称 65. \"remark\": \"\" // 备注 66. } 67. ], 68. \"processUnit\": [ // 工序单元(非必填) 69. { 70. \"code\": \"01\", // 工序单元编码 71. \"name\": \"#1 电炉\", // 工序单元名称 72. \"processCode\": \"06\", // 生产工序编码 73. \"commDate\": \"2010-10-10 00:00:00\", // 投产日期 74. \"designedCapacity\": \"年产钢水 50 万吨\", // 生产能力 75. \"remark\": \"\" // 备注 76. } 77. ] 78.} 返回参数 5.3 获取用能单位基础信息 URL /api_3/PRP_organization_infos 请求方法 GET 请求参数 返回参数 参数名 类型 参数说明 collectItemConfig List 采集数据项配置 enterprise List 用能单位信息 group List 集团信息 process List 生产工序 processUnit List 工序单元 79.{ 80. \"collectItemConfig\": [ // 采集数据项配置 81. { 82. \"name\": \"全厂-二次能源-电力-购进已消费\", // 采集数据项指标名称 ,用户自填 83. \"Meter_id\":12, //对应表的主键 84. \"processCode\": \"00\", // 生产工序, 不填默认为\"00\" 85. \"processUnitCode\": \"00\", // 工序单元 86. \"equipmentCode\": \"00\", // 重点耗能设备类型 87. \"equipmentUnitCode\": \"00\", // 重点耗能设备编号 88. \"Energy_Code\": \"013300\", // 能源编码 89. \"Real_zbckz\": \"0.7143\", // 能源实际折标系数 90. \"dataUsageCode\": \"11\", // 用途编码 91. \"inputType\": \"1\", // 数据采集来源 92. \"statType\": \"1\", //采集频率,0 实时; 1 日; 2 月;3 年 93. \"collectSystemName\": \"EXCENERGY 能源采集系统\", // 采集系统名称 94. \"remark\": \"\", // 备注 95. \"scope\": 1 // 范围 1:全厂,2:生产工序,3:生产工序单元,4:重点耗能设备 96. } 97. ], 98. \"enterprise\": { // 用能单位信息 99. \"name\": \"示例钢铁有限责任公司\", // 单位名称 100. \"typeCode\": \"159\", // 单位类型 101. \"typeName\": \"其他有限责任公司\", // 单位类型名 102. \"industryCode\": \"C3120\", // 行业编码 103. \"regionCode\": \"410481\", // 区域编码(必填 6 位到地区级别) 104. \"regionName\": \"示例市\", // 地区名 105. \"center\": false, // 是否央企 106. \"jgzh\": false, // 是否能源加工转换类企业 107. \"energyConsumeLevel\": 4, // 1:5000 吨以下, 2:5000~10000 吨,3:1 万-10 万吨,4:10 万-50 万吨,5:50 万-300 万吨,6:300 万吨以上 108. \"latitude\": 33.283433, // 用能单位主要厂址中心纬度 109. \"longitude\": 113.505883, // 用能单位主要厂址中心经度 110. \"phone\": \"0375-8111111\", // 企业联系电话 111. \"fax\": \"0375-8111111\", // 传真 112. \"email\": \"zxjc@163.com\", // 电子邮箱 113. \"address\": \"河南省示例市人民大道 1 号\", // 地址 114. \"zipCode\": \"462500\", // 邮编 115. \"url\": \"\", // 用能单位网站地址 URL 116. \"fieldCode\": \"100\", // 领域编码,工业:100,交通运输.仓储和邮政业:200,住宿和餐饮业:300,批发和零售业:400,教育:500,其他:600 117. \"fieldName\": \"工业\", // 领域名称 118. \"corporationName\": \"赵钱孙\", // 法人代表 119. \"registerDate\": \"1998-10-10 00:00:00\", // 注册日期 120. \"registerPrincipal\": 10000, // 注册资金,万元 121. \"energyOffice\": \"机电能源部\", // 能管机构名称 122. \"energyOfficial\": \"李周\", // 主管节能领导姓名 123. \"energyOfficialPosition\": \"机电能源部主任\", // 主管节能领导职位 124. \"energyOfficialPhone\": \"18866669999\", // 主管节能领导联系电话 125. \"energyPass\": false, // 是否通过能源管理体系认证 126. \"energyRespName\": \"吴郑\", // 能管负责人姓名 127. \"energyRespPhone\": \"18677778888\", // 能管负责人电话 128. \"passDate\": \"\", // 认证日期 129. \"passOrg\": \"\", // 认证机构 130. \"productionLine\": \"电弧炉生产宽厚板短流程生产线\", //企业主要生产线名称 131. \"leadingProduct\": \"钢板\", //企业主导产品 132. \"remark\": \"企业信息化水平落后,除电力消费数据外,其他数据指标均采用人工填报方式上传\" // 备注 133. }, 134. \"group\": { //集团(非必填) 135. \"name\": \"河北示例钢铁股份有限公司\", // 集团名称 136. \"address\": \"河北省示例市体育南大街 385 号\", // 集团地址 137. \"remark\": \"\" // 备注 138. }, 139. \"process\": [ // 生产工序(非必填) 140. { 141. \"processCode\": \"06\", // 生产工序编码 142. \"processName\": \"电炉工序\", // 生产工序名称 143. \"remark\": \"\" // 备注 144. } 145. ], 146. \"processUnit\": [ // 工序单元(非必填) 147. { 148. \"code\": \"01\", // 工序单元编码 149. \"name\": \"#1 电炉\", // 工序单元名称 150. \"processCode\": \"06\", // 生产工序编码 151. \"commDate\": \"2010-10-10 00:00:00\", // 投产日期 152. \"designedCapacity\": \"年产钢水 50 万吨\", // 生产能力 153. \"remark\": \"\" // 备注 154. } 155. ] 156.} 5.4 获取版本信息 URL /api_3/PRP_version 请求方法 GET 请求参数 返回参数 参数名 类型 参数说明 regVersion Str 注册服务版本信息 dicVersion Str 基础数据版本信息 requireUpdate Int 1:需要更新,0:不需要更新 deviceID Str 设备序列号 enterpriseCode str 社会信用代码 region str 行政区划代码，具体到县级 5.5 更新版本数据(更新后平台基础数据会变化) URL /api_3/PRP_version 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 enterpriseCode str 是 社会信用代码 region str 是 行政区划代码，具体到县级 返回参数 5.6 添加填报数据 URL /api_3/PRP_manual_energy_measure_datas 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Meter_id int 是 对应表的主键 Date_Time datetime 是 数据时间 Date_Type str 是 时间类型，2-月，3-天 Data_Amount str 是 数据 返回参数 5.7 获取采集数据上传记录 URL /api_3/PRP_uploaded_energy_measure_datas 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Time_Start str 是 查询开始时间，\"2019-04-01 13:53:59\" Time_End str 是 查询结束时间，\"2019-04-01 13:53:59\" 返回参数 参数名 类型 参数说明 id int Original_Data Json 上传的原始数据 Target_Url str 格式\"07:30:00\" Response_Data Json 上传时返回的原始数据 Upload_Time datetime 上传的时间 5.8 获取省平台操作结果 URL /api_3/PRP_operation_result 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Operation_Type int 是 1:上传用能单位基础信息, 2:更新版本数据 返回参数 参数名 类型 参数说明 Result int 1:成功, 0:失败 Response_Data Str 上传时返回的原始数据 6.1 获取报警状态 URL /api_3/alarm_status 请求方法 GET 请求参数 参数名 类型 参数说明 Per_Page_Counts int 分页每页显示数，默认10 Page_Counts int 页码，默认0 返回参数 参数名 类型 参数说明 id int Alarm_Name str 报警名称 Alarm_Level int 1: 一般 2:警告 3:严重 Alarm_Type int 报警类型, 1: 机器每小时累计能耗报警, 2:机器瞬时参数报警， Alarm_Notify int 1:平台通知 2:短信通知 3: 邮箱通知 4:微信通知 Notify_Address str 通知地址(手机号/邮箱/微信号) 6.2 添加报警状态 URL /api_3/alarm_status 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Alarm_Name str 是 报警名称 Alarm_Type int 是 报警类型, 1: 机器每小时累计能耗报警, 2:机器瞬时参数报警 Alarm_Level int 是 1: 一般 2:警告 3:严重 Alarm_Notify int 是 1:平台通知 2:短信通知 3: 邮箱通知 4:微信通知 Notify_Address str 是 通知地址(手机号/邮箱/微信号) 返回参数 6.3 修改报警状态 URL /api_3/alarm_status 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 id int 是 Alarm_Name str 是 报警名称 Alarm_Type int 是 报警类型, 1: 机器每小时累计能耗报警, 2:机器瞬时参数报警 Alarm_Level int 是 1: 一般 2:警告 3:严重 Alarm_Notify int 是 1:平台通知 2:短信通知 3: 邮箱通知 4:微信通知 Notify_Address str 是 通知地址(手机号/邮箱/微信号) 返回参数 6.4 删除报警状态 URL /api_3/alarm_status 请求方法 DELETE 请求参数 参数名 类型 参数说明 id 返回参数 6.5 获取报警状态规则 URL /api_3/alarm_status_rules 请求方法 GET 请求参数 参数名 类型 参数说明 Per_Page_Counts int 分页每页显示数，默认10 Page_Counts int 页码，默认0 Alarm_id str 筛选, 传报警状态主键id 返回参数 参数名 类型 参数说明 id int Rule_Name str 规则名称 Alarm_id int 报警主键id Meter_id int 仪表主键id Meter_Parameter str 判断测点 LowerLimit float UpperLimit float 6.6 添加报警状态规则 URL /api_3/alarm_status_rules 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Rule_Name str 是 规则名称 Alarm_id int 是 报警主键id Meter_id int 是 仪表主键id Meter_Parameter str 判断测点, 仅当报警类型为机器瞬时参数报警时需要传 LowerLimit float 是 UpperLimit float 是 返回参数 6.7 修改报警状态规则 URL /api_3/alarm_status_rules 请求方法 PUT 请求参数 ** 参数名 类型 是否必须 参数说明 id int 是 主键 Rule_Name str 是 规则名称 Alarm_id int 是 报警主键id Meter_id int 是 仪表主键id Meter_Parameter str 判断测点, 仅当报警类型为机器瞬时参数报警时需要传 LowerLimit float 是 UpperLimit float 是 返回参数 6.8 删除报警状态规则 URL /api_3/alarm_status_rules 请求方法 DELETE 请求参数 参数名 类型 参数说明 id int 返回参数 6.9 获取报警记录 URL /api_3/alarm_message 请求方法 DELETE 请求参数 参数名 类型 是否必须 参数说明 Per_Page_Counts int 否 分页每页显示数，默认10 Page_Counts int 否 页码，默认0 Time_Start datetime 是 Time_End datetime 是 Meter_Name str 否 仪表筛选 Meter_Superior str 否 机器筛选 Alarm_Type int 否 筛选 Alarm_Level int 否 筛选 Rule_Name str 否 筛选 返回参数 参数名 类型 参数说明 id int Alarm_Name str 报警名称 Rule_Name str 报警规则名称 Meter_Name str 仪表名称 Meter_Superior str 机器名称 Alarm_Type int 报警类型 Alarm_Level int 报警级别 Alarm_Content str 报警内容 Alarm_Time str 报警时间 6.10 获取报警个数的统计(年月日) URL /api_3/alarm_statistic_nums 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Time_Type str 是 时间类型，1-年，2-月，3-天 Time_Start datetime 是 查询开始时间，\"2019-04-01 00:00:00\" Time_End datetime 是 查询结束时间，\"2019-04-02 00:00:00\" Statistic_Method int 是 0:总计,1:根据Alarm_Level统计,2:根据Alarm_Type统计,3:根据Alarm_Notify统计 Return_Format int 是 1:返回总量, 2: 返回详细总量(查天, 返回每小时的值) 返回参数 参数名 类型 参数说明 Time str 时间下标 Total_Amount int 个数 Alarm_Level int 是否返回根据Statistic_Method Alarm_Type int 是否返回根据Statistic_Method Alarm_Notify int 是否返回根据Statistic_Method 7.1 获取OEE规则 URL /api_3/OEE_status_rules 请求方法 GET 请求参数 参数名 类型 参数说明 Per_Page_Counts int 分页每页显示数，默认10 Page_Counts int 页码，默认0 返回参数 参数名 类型 参数说明 id int Rule_Name str 规则名称 Status_Name str 状态名称 Meter_id int 仪表主键 Meter_Parameter str 判断测点 LowerLimit float UpperLimit float Meter_Superior_id str 机器 7.2 添加OEE规则 URL /api_3/OEE_status_rules 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Rule_Name str 是 规则名称 Status_Name str 是 状态名称 Meter_id int 是 仪表主键id Meter_Parameter str 是 判断测点 LowerLimit float 是 UpperLimit float 是 Meter_Superior_id str 是 机器 返回参数 7.3 修改OEE规则 URL /api_3/OEE_status_rules 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 id int 是 主键 Rule_Name str 是 规则名称 Status_Name str 是 状态名称 Meter_id int 是 仪表主键id Meter_Parameter str 是 判断测点 LowerLimit float 是 UpperLimit float 是 Meter_Superior_id int 是 机器 返回参数 7.4 删除OEE规则 URL /api_3/OEE_status_rules 请求方法 DELETE 请求参数 参数名 类型 参数说明 id int 返回参数 7.5 获取OEE时间段内的状态记录 URL /api_3/OEE_statistic_records 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Time_Start datetime 是 查询开始时间，\"2019-04-01 00:00:00\" Time_End datetime 是 查询结束时间，\"2019-04-02 00:00:00\" Meter_Superior_id int 是 机器筛选 注: 1. 开始结束时间的间隔最大为24小时 ​ 2. 初始点一条数据, 后面的数据都是状态切换才返回 返回参数 参数名 类型 参数说明 Time str 时间下标 Status_Name str 状态名称 7.6 获取OEE状态时间的统计(年月日) URL /api_3/OEE_statistic 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Time_Type str 是 时间类型，1-年，2-月，3-天 Time_Start datetime 是 查询开始时间，\"2019-04-01 00:00:00\" Time_End datetime 是 查询结束时间，\"2019-04-02 00:00:00\" Return_Format int 是 1:返回总量, 2: 返回详细总量(查天, 返回每小时的值) Meter_Superior_id int 是 机器筛选 返回参数 参数名 类型 参数说明 Time str 时间下标 Total_Amount int 时间总量(单位: 秒) Status_Name str 状态名称 8.1 获取产品信息 URL /api_3/products 请求方法 GET 请求参数 参数名 类型 参数说明 Per_Page_Counts int 分页每页显示数，默认10 Page_Counts int 页码，默认0 返回参数 参数名 类型 参数说明 id Int Product_Name str 产品名称 Product_Unit str 计量单位 Remarks str 产品备注 8.2 添加产品信息 URL /api_3/products 请求方法 POST 请求参数 返回参数 参数名 类型 是否必须 参数说明 Product_Name str 是 产品名称 Product_Unit str 否 计量单位 Remarks str 否 产品备注 8.3 修改产品信息 URL /api_3/products 请求方法 PUT 请求参数 返回参数 参数名 类型 是否必须 参数说明 id Int 是 Product_Name str 是 产品名称 Product_Unit str 否 计量单位 Remarks str 否 产品备注 8.4 删除产品信息 URL /api_3/products 请求方法 DELETE 请求参数 返回参数 参数名 类型 参数说明 id Int 8.5 获取产品产量信息 URL /api_3/product_output 请求方法 GET 请求参数 参数名 类型 参数说明 Per_Page_Counts int 分页每页显示数，默认10 Page_Counts int 页码，默认0 Production_Batch str 生产批次 Product_Name str 产品名称 返回参数 参数名 类型 参数说明 id int Product_id int 产品主键 Total_Amount int 产量 Meter_Superior_id int 机器主键 Time_Start str 开始时间 Time_End str 结束时间 Create_Time str 录入时间 ProductBatch_id str 生产批次主键 8.6 录入产品产量信息 URL /api_3/product_output 请求方法 POST 请求参数 返回参数 参数名 类型 是否必须 参数说明 Product_id int 是 产品主键id Total_Amount int 是 产量 Meter_Superior_id int 是 机器主键id Time_Start str 是 开始时间 Time_End str 是 结束时间 ProductBatch_id int 是 生产批次主键id 8.7 修改产品产量信息 URL /api_3/product_output 请求方法 PUT 请求参数 返回参数 参数名 类型 是否必须 参数说明 id int 是 Product_id int 是 产品主键id Total_Amount int 是 产量 Meter_Superior_id int 是 机器主键id Time_Start str 是 开始时间 Time_End str 是 结束时间 ProductBatch_id int 是 生产批次主键id 8.8 删除产品产量信息 URL /api_3/product_output 请求方法 DELETE 请求参数 返回参数 参数名 类型 是否必须 参数说明 id int 是 8.9 获取产品产量统计信息 URL /api_3/product_output_energy_statistic 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Time_Type str 是 时间类型，1-年，2-月，3-天 Time_Start datetime 是 查询开始时间，\"2019-04-01 00:00:00\" Time_End datetime 是 查询结束时间，\"2019-04-02 00:00:00\" Product_Name str 否 根据产品名称筛选 Meter_Superior str 否 根据机器名称筛选 Is_Order int 否 根据总量排序(仅当Return_Format为1时可进行排序) Order_Type int 否 1: 升序, 2:降序 Limit int 否 返回数据个数 Summary_Type int 是 0:不汇总, 1: 根据产品汇总, 2: 根据机器汇总 Return_Format int 是 1:返回总量, 2: 返回详细总量(查天, 返回每小时的值) Amount_Type int 是 返回总量的类型1:产量, 2:某能源能耗, 3:综合耗能, 4: 某能源单品能耗, 5:综合单品能耗 Energy_Type str 否 能源类型, 当Amount_Type为2和4是必填 返回参数 参数名 类型 参数说明 Product_Name str 产品名称 Meter_Superior str 机器名称 Time str 时间下标 Total_Amount int 总量 8.10 获取生产批次 URL /api_3/productsBatch 请求方法 GET 请求参数 参数名 类型 参数说明 Per_Page_Counts int 分页每页显示数，默认10 Page_Counts int 页码，默认0 返回参数 参数名 类型 参数说明 id Int Production_Batch str 生产批次 Time_Start time 开始时间 Time_End time 结束时间 8.11 添加生产批次 URL /api_3/productsBatch 请求方法 POST 请求参数 返回参数 参数名 类型 是否必须 参数说明 Production_Batch str 生产批次 Time_Start time 开始时间 Time_End time 结束时间 8.12 修改生产批次 URL /api_3/productsBatch 请求方法 PUT 请求参数 返回参数 参数名 类型 是否必须 参数说明 id Int 是 Production_Batch str 生产批次 Time_Start time 开始时间 Time_End time 结束时间 8.13 删除生产批次 URL /api_3/productsBatch 请求方法 DELETE 请求参数 返回参数 参数名 类型 参数说明 id Int 8.14 获取批次产量统计信息 URL /api_3/productsBatch_output_energy_statistic 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Production_Batch str 是 根据批次名称筛选 Product_Name str 否 根据产品名称筛选 Meter_Superior str 否 根据机器名称筛选 Is_Order int 否 根据总量排序可进行排序)，1:排序，0:不排序 Order_Type int 否 1: 升序, 2:降序 Limit int 否 返回数据个数 Summary_Type int 是 0:不汇总, 1: 根据产品汇总, 2: 根据机器汇总,3 根据批次名称汇总 Amount_Type int 是 返回总量的类型1:产量, 2:某能源能耗, 3:综合耗能, 4: 某能源单品能耗, 5:综合单品能耗，6:生产效率 Energy_Type str 否 能源类型, 当Amount_Type为2和4是必填 返回参数 参数名 类型 参数说明 Production_Batch str 批次名称 Product_Name str 产品名称 Meter_Superior str 机器名称 Total_Amount int 总量 9.1 小程序用户信息绑定 URL /api_3/xcx_info_bind 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 code str 是 encryptedData str 是 iv str 是 9.2 获取省市关系 URL /api_3/province_city_list 请求方法 GET 请求参数 返回参数 参数名 类型 参数说明 Province_Name str 省名 City_List List [{“City_Name”:”常州市”}] 附录Ⅰ项目开发名词说明 缩写 说明 用户 Usr_Name 用户名称 Usr_Password 用户密码 Usr_ID 用户ID Usr_Email 用户邮箱 Usr_Phone 用户联系方式 Usr_Company 用户公司名称 Usr_Description 用户描述 is_active 用户状态，是否激活，在线，离线 Usr_MQTT_Password 用户MQTT密码 Usr_MQTT_Subject 用户MQTT主题 设备 Dev_ID 设备ID Old_Dev_ID 原设备ID Dev_Name 设备名称 DevCreate_Time 设备创建时间 DevUpdate_Time 设备修改时间 Dev_State 设备运行状态 Dev_Description 设备描述 测点 Measure_ID 测点ID Measure_Name 测点名称 MeasureDataFlow_Name 测点数据流名称 Measure_Unit 测点单位 MeasureCreate_Time 测点创建时间 MeasureUpdate_Time 测点修改时间 Measure_State 测点状态 Measure_Description 测点描述 Measure_DataType 测点数据类型，0：状态值；1：数据值 Measure_TotalState 测点值统计，0：不记录；1：记录 Measure_LowerLimit 测点数据下限值 Measure_UpperLimit 测点数据上限值 Measure_Icon 测点图标 Measure_SwitchState 表示设备运行的测点 请求 Sreach_Where 搜索条件，字段名 Per_Page_Counts 每页显示条数，默认10 Page_Counts 页数，默认1 Start_Date 开始时间，格式：\"2019-04-01 13:53:59\"，指定Timestamp时无效 End_Date 结束时间，格式：\"2019-04-01 13:53:59\"，指定Timestamp时无效 Measure_Names 要查询的测点名称，以逗号隔开 Order_By 排序名称 Order_Way 排序方式‘asc’,’desc’,默认asc Limits 请求数量，默认为所有数据 Timestamp 指定单个时间的一条数据，格式\"2019-04-01 13:53:59\"，如果这个时间没有数据，就返回这之前时间最接近的一条数据 返回 Measure_Name1...n 测点名称 Station_ongitude 2G模块的基站经度 Station_latitude 2G模块的基站纬度 LONGITUDE GPS模块的经度 LATITUDE GPS模块的纬度 Timestamp 一条数据的时间 Total_Numbers 返回数据的总条数 Picture_URL 图片URL Err_No 返回码 Err_Msg 返回信息 Data 返回数据 操作 Operate_Number 操作码，‘1’，‘2’，‘3’，‘4’,‘5’ Send_Text 发送内容，透传 附录Ⅱ 告警信息说明 Err_No 说明 0 正常 1 告警 -1 异常 附录Ⅲ 日志信息说明 级别 Err_Msg error 获取数据失败 error xx操作失败 warning SIM卡异常 success xx操作成功 info 用户登录 info 用户退出 附录Ⅳ 通用状态码说明 Err_NO Err_Msg 4001 数据库查询出错 4002 无数据 4003 数据已存在 4004 数据错误 4101 用户未登录 4102 用户登录失败 4103 参数错误 4104 用户不存在 4105 用户权限不足 4106 密码错误 4107 数据库记录新增或修改出错 4201 非法请求或请求次数受限 4202 IP受限 4302 文件读写错误 4501 未知错误 Copyright © lijiam 2019 all right reserved，powered by Gitbook本书发布时间： 2020-08-14 11:23:00 "},"part3/中科云控接口.html":{"url":"part3/中科云控接口.html","title":"中科项目接口","keywords":"","body":"中科云控接口 1.用户接口 登录模块 1.1登录 URL /api/auth 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 是 用户名 Usr_Password str 是 密码 返回参数 参数名 类型 参数说明 Usr_Name str Usr_ID str 用户ID Is_Superuser boolean Is_Firm int Display_Mode int 1,2,3;页面展示模式，1厂商派发模式2.内部角色管理模式3.厂商派发+内部角色管理 1.2退出登录 URL /api/auth 请求方法 DELETE 请求参数 返回参数 用户信息模块 1.3获取系统用户信息 URL /api_2/users 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Per_Page_Counts str 否 分页每页显示数，默认10 Page_Counts str 否 页码，默认0 Search_Where str 否 模糊查询用户名 返回参数 参数名 类型 参数说明 id int Usr_Name str 用户ID Usr_ID str Usr_Email str Usr_Company str Usr_Phone str Usr_Description str Usr_MQTT_Subject str Role_Name str Usr_Name_Simple str 说明 登录用户的角色为管理员时, 返回所有系统用户 登录用户的角色为客户时, 不返回任何信息 登录用户的角色为维保``客户经理时, 返回登录用户的信息 1.4创建系统用户（要有权限） URL /api_2/users 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 是 用户名 Usr_Password str 是 密码 Usr_Email str 否 Usr_MQTT_Password str 否 Usr_Phone str 否 Usr_Description str 否 Role_Name str 是 Usr_Name_Simple str 是 用户简称 返回参数 说明 公司内部管理员添加内部角色用户时用户名不能包含英文大写，内部用户的‘展示模式’、‘所属公司’和内部管理员一致 1.5修改用户个人信息 URL /api_2/users 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 id str 是 Role_Name str 是 Usr_Name str 是 Usr_Email str 否 Usr_Phone str 否 Usr_Description str 否 Usr_Name_Simple str 是 用户简称 返回参数 1.6删除用户(包含客户) URL /api_2/users 请求方法 DELETE 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 是 无法删除管理员用户名 返回参数 1.7客户批量添加到维保 URL /api_2/maintenance_add_customers 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_Maintenance str 是 维保 Customer_Name str 是 客户名, 多个用’,’相连 返回参数 1.8客户批量添加到客户经理 URL /api_2/manager_add_customers 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_Manager str 是 客户经理 Customer_Name str 是 客户名, 多个用’,’相连 返回参数 1.9获取客户信息 URL /api_2/customers 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Per_Page_Counts str 否 Page_Counts str 否 Search_Where str 否 模糊搜索客户简称和公司和联系人 Usr_Maintenance str 否 维保 Usr_Manager str 否 客户经理 返回参数 参数名 类型 参数说明 id str Usr_Name str 用户名 Usr_Email int 客户邮箱 Usr_Contact_Name Str 客户联系人 Usr_Phone str 客户电话 Usr_Company_Name str 客户公司名 Usr_Maintenance Str 所属维保 Usr_Manager str 所属客户经理 Usr_Addr_Province str 客户地址（省） Usr_Addr_City str 客户地址（市） Usr_Manager_Phone Str 客户经理的电话 Usr_Manager_Email str 客户经理的邮箱 Devs_Number Int 装机数 Usr_Name_Simple str 客户简称(最大只能6位) Time_Of_Contract Datetime 签约时间 Electricity_Fees str 协议电价 Share_Radio str 分享比 说明 登录用户的角色为管理员时, 返回所有客户信息 登录用户的角色为客户时, 返回自己的信息 登录用户的角色为维保``客户经理时, 返回自己下面客户的信息 1.10创建客户 URL /api_2/customers 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 是 用户名 Usr_Password str 是 密码 Usr_Email Str 否 客户邮箱 Usr_Contact_Name Str 否 客户联系人 Usr_Phone Str 否 客户联系电话 Usr_Company_Name str 否 客户公司名, 不能重复 Usr_Description Str 否 用户描述 Usr_Maintenance Str 否 所属维保 Usr_Manager Str 否 所属客户经理 Usr_Addr_Province str 是 所属省 Usr_Addr_City str 是 所属城市 Usr_Name_Simple str 是 客户简称(最大只能6位) Time_Of_Contract Datetime 否 签约时间 Electricity_Fees str 否 协议电价 Share_Radio str 否 分享比 返回参数 1.11修改客户信息 URL /api_2/customers 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 id int 是 Usr_Name str 是 用户名 Usr_Email Str 否 客户邮箱 Usr_Contact_Name Str 否 客户联系人 Usr_Phone Str 否 客户联系电话 Usr_Company_Name str 否 客户公司名 Usr_Description Str 否 用户描述 Usr_Maintenance Str 否 所属维保 Usr_Manager Str 否 所属客户经理 Usr_Addr_Province str 是 所属省 Usr_Addr_City str 是 所属城市 Usr_Name_Simple str 是 客户简称 Time_Of_Contract Datetime 否 签约时间 Electricity_Fees str 否 协议电价 Share_Radio str 否 分享比 返回参数 参数名 类型 参数说明 Usr_Name str Usr_ID str 用户ID Is_Superuser int Is_Firm int Display_Mode int 1,2,3;页面展示模式，1厂商派发模式2.内部角色管理模式3.厂商派发+内部角色管理 用户权限 1.12获取用户权限 URL /api_2/users_permissions 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 是 用户名 返回参数 参数名 类型 参数说明 Home_View int 首页查看0,1,0表示无权限，1表示有权限 Dev_Add int 设备创建 Dev_Modify int 设备修改 Dev_Delete int 设备删除 Dev_Control int 设备控制 Dev_Operator int 设备算子 Dev_Distribute int 设备派发 Measure_Add int 测点创建 Measure_Modify int 测点修改 Measure_Delete int 测点删除 Data_DevView int 数据查看 Data_DevInfo int 图标分析 Data_DevPos int 路径查看 User_Info int 用户信息查看 User_Log int 用户日志查看 User_Add int 用户创建 User_Modify int 用户信息修改 User_Delete int 用户删除 Role_Name Str 角色名 Alarm_Message int 报警信息 Project_Add 创建项目 Project_Modify 修改项目 Project_Delete 删除项目 Report_View int 报表查看 Report_Export int 报表导出 说明 用户登录成功后和查看用户详细权限时使用 1.13修改用户权限 URL /api_2/users_permissions 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 是 Home_View int 否 首页查看0,1,0表示无权限，1表示有权限 Dev_Add int 否 设备创建 Dev_Modify int 设备修改 Dev_Delete int 设备删除 Dev_Control int 设备控制 Dev_Operator int 设备算子 Dev_Distribute int 设备派发 Measure_Add int 测点创建 Measure_Modify int 测点修改 Measure_Delete int 测点删除 Data_DevView int 数据查看 Data_DevInfo int 图标分析 Data_DevPos int 路径查看 User_Info int 用户信息查看 User_Log int 用户日志查看 User_Add int 用户创建 User_Modify int 用户信息修改 User_Delete int 用户删除 Role_Name Str 角色名 Alarm_Message int 报警信息 Project_Add 创建项目 Project_Modify 修改项目 Project_Delete 删除项目 Report_View int 报表查看 Report_Export int 报表导出 返回参数 角色权限 1.14获取角色权限 URL /api_2/roles_permissions 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Role_Name str 否 不填返回所有角色权限 返回参数 参数名 类型 参数说明 Role_Name str 角色名 Role_Description str 角色描述 Home_View int 首页查看0,1,0表示无权限，1表示有权限 Dev_Add int 设备创建 Dev_Modify int 设备修改 Dev_Delete int 设备删除 Dev_Control int 设备控制 Dev_Operator int 设备算子 Dev_Distribute int 设备派发 Measure_Add int 测点创建 Measure_Modify int 测点修改 Measure_Delete int 测点删除 Data_DevView int 数据查看 Data_DevInfo int 图标分析 Data_DevPos int 路径查看 User_Info int 用户信息查看 User_Log int 用户日志查看 User_Add int 用户创建 User_Modify int 用户信息修改 User_Delete int 用户删除 Role_Name Str 角色名 Alarm_Message int 报警信息 Project_Add 创建项目 Project_Modify 修改项目 Project_Delete 删除项目 Report_View int 报表查看 Report_Export int 报表导出 1.15添加角色 URL /api_2/roles_permissions 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Role_Name str Role_Description str 否 角色描述 Home_View int 否 首页查看0,1,0表示无权限，1表示有权限 Dev_Add int 否 设备创建 Dev_Modify int 设备修改 Dev_Delete int 设备删除 Dev_Control int 设备控制 Dev_Operator int 设备算子 Dev_Distribute int 设备派发 Measure_Add int 测点创建 Measure_Modify int 测点修改 Measure_Delete int 测点删除 Data_DevView int 数据查看 Data_DevInfo int 图标分析 Data_DevPos int 路径查看 User_Info int 用户信息查看 User_Log int 用户日志查看 User_Add int 用户创建 User_Modify int 用户信息修改 User_Delete int 用户删除 Role_Name Str 角色名 Alarm_Message int 报警信息 Project_Add 创建项目 Project_Modify 修改项目 Project_Delete 删除项目 Report_View int 报表查看 Report_Export int 报表导出 返回参数 1.16修改角色权限（包括角色名） URL /api_2/roles_permissions 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 Role_Name_Old str 是 Role_Name str 是 Role_Description str 否 角色描述 Home_View int 否 首页查看0,1,0表示无权限，1表示有权限 Dev_Add int 否 设备创建 Dev_Modify int 设备修改 Dev_Delete int 设备删除 Dev_Control int 设备控制 Dev_Operator int 设备算子 Dev_Distribute int 设备派发 Measure_Add int 测点创建 Measure_Modify int 测点修改 Measure_Delete int 测点删除 Data_DevView int 数据查看 Data_DevInfo int 图标分析 Data_DevPos int 路径查看 User_Info int 用户信息查看 User_Log int 用户日志查看 User_Add int 用户创建 User_Modify int 用户信息修改 User_Delete int 用户删除 Role_Name Str 角色名 Alarm_Message int 报警信息 Project_Add 创建项目 Project_Modify 修改项目 Project_Delete 删除项目 Report_View int 报表查看 Report_Export int 报表导出 返回参数 说明 未修改角色名时，Role_Name_old和Role_Name相同 系统默认角色不能修改 1.17删除角色 URL /api_2/roles_permissions 请求方法 DELETE 请求参数 参数名 类型 是否必须 参数说明 Role_Name str 是 返回参数 说明 从删除角色前应跟用户多次确认 2.统计接口 2.1用户统计信息 URL /api_2/user_statistics 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Province_Name str 否 所属省，不传为全国 返回参数 参数名 类型 参数说明 Total_Usrs int 用户总数 Total_Maintenance int 维保总数 Total_Manager int 客户经理总数 Total_Customer int 客户总数 Total_Project int 项目总数 2.2设备状态占比信息 URL /api_2/device_state 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Owner_Type str 是 user:用户名, project:项目 Owner_Name Str 是 指定项目或用户 Province_Name str 否 所属省，不传为全国 返回参数 参数名 类型 参数说明 EnergySave_Number int 节能模式数量 PowerFreq_Number int 工频模式数量 Shutdown_Number int 设备停机数量 All_Number Int 设备总数 2.3统计型测点数据总量 URL /api_2/statistic_measure_datas 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Date_Type str 是 ‘1’-年，‘2’-月，‘3’-天, '4'-小时 Date_Time Datetime 是 按天查,返回一天的总值,按月返回一月的总值 Owner_Type str 是 user:用户名, project:‘项目’dev:设备 Owner_Name Str 是 多个用’,’相连,传\"\"表示返回所有客户信息(不包含管理员等其他内部用户，前提是Owner_Type是user) Province_Name str 否 取出省份下的所有客户数据进行统计计算, 请求时Owner_Name的长度必须为1 Statistic_Measure_Name str 是 测点数据名称,可用名称见下面 返回参数 参数名 类型 参数说明 Date_Time str “2020-01-08 00:00:00” Data_Amount Str 数据 Owner_Name str 项目名或用户名或设备 Statistic_Measure_Name可用名称表 名称 说明 Cumulative_Power 累计耗电量 Electricity_Save 节电量 Electricity_Save_Fees 节电费用 Revenue_Income 收入 Electricity_Rate_Instant 瞬时节电率 Electricity_Rate_Average 平均节电率 Standard_Coal 标准煤 Carbon_Emission 二氧化碳排放量 Online_Duration 在线时长 Online_Account 在线占比 2.4统计型测点数据详细(每月/天/小时)接口 URL /api_2/statistic_measure_datas_detail 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Date_Type str 是 ‘1’-年，‘2’-月，‘3’-天 Start_Time Datetime 是 按天查,返回每小时的值,按月,返回每天的值 End_Time Datetime 是 Owner_Type str 是 user:用户名, project:‘项目’dev:设备 Owner_Name Str 是 多个用’,’相连,传‘’表示所有 Province_Name str 否 所属省，不传为全国 Statistic_Measure_Name str 是 测点数据名称,可用名称见下面 返回参数 参数名 类型 参数说明 Details str 格式看下面 Owner_Name str 项目名或用户名或设备 Details格式: [ { ‘Date_Time’:“2020-01-08 00:00:00”, ‘Data_Amount’:123, }, ... ] 2.5全国各省各市设备状态占比信息 URL /api_2/country_device_state 请求方法 GET 请求参数 返回参数 参数名 类型 参数说明 Province_Name str 省名 EnergySave_Number int 节能模式数量 PowerFreq_Number int 工频模式数量 Shutdown_Number int 设备停机数量 All_Number Int 设备总数 City_Device_State_List list 格式见下面 City_Device_State_List格式 [ { ​ \"All_Number\":6, ​ \"EnergySave_Number\":1 ​ \"PowerFreq_Number \":2 ​ \"Shutdown_Number\":3, ​ \"City_Name\":\"常州市\", ​ \"City_LNG\":\"\", # 城市的经度 ​ \"City_LAT\":\"\" # 城市的纬度 }, ] 3.项目接口 3.1获取项目信息 URL /api_2/project 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 否 项目所属用户名称, 不传返回所有项目 Per_Page_Counts str 否 分页每页显示数，默认10 Page_Counts str 否 页码，默认0 Search_Where str 否 模糊查询项目名 返回参数 参数名 类型 参数说明 id int 主键 Project_Name str 项目名称,各工厂的项目名称相互不能重复 Create_Time str 项目创建时间“2020-01-08 19:55:55” Project_Location Str 项目位置 Project_ID int 项目ID，用于区分多个项目 Usr_Name Str 项目所属用户名称 Dev_Customer_Company str 设备所属客户公司 3.2添加项目 URL /api_2/project 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Usr_Name str 是 用户名 Project_Name str 是 Project_Location str 是 项目位置 Project_ID Str 是 返回参数 参数名 类型 参数说明 id int 3.3修改项目 URL /api_2/project 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 id int 是 主键 Project_Name str 是 Project_Location str 是 项目位置 Project_ID Str 是 返回参数 3.4删除项目 URL /api_2/project 请求方法 Delete 请求参数 参数名 类型 是否必须 参数说明 id str 是 主键 返回参数 4.设备接口 4.1添加设备 URL /api_2/devs 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Dev_Name str 是 设备名 Dev_ID str 是 网关的唯一ID Dev_Project str 否 设备所属项目 Gateway_ID str 否 网关ID Dev_Customer str 否 设备所属客户 返回参数 参数名 类型 参数说明 id int 主键 4.2获取设备配置参数 URL /api_2/devs 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 id int 否 利用id获取单个设备的数据 Per_Page_Counts str 否 分页每页显示数，默认10 Page_Counts str 否 页码，默认0 Search_Where str 否 模糊查询设备名,设备ID Dev_Project Str 否 所属项目筛选 Dev_Customer Str 否 所属客户筛选 返回参数 参数名 类型 参数说明 id int 主键 Dev_Name Str 设备名称 Dev_ID str 设备ID Gateway_ID Str 网关ID Dev_State int 设备状态，1:节能，其他:停机，2:旁路 Gateway_State str 网关状态 Dev_Project Str 设备所属项目 Dev_Customer str 设备所属客户 Dev_Customer_Simple str 客户简称 Producing_Time str 设备投产时间 Dev_Customer_Company str 设备所属客户公司 Billing_Start_Time Datetime 验收时间(在算子里配置) Reception_State str 验收状态 Cum_Runtime str 累计运行时间(单位h) 4.3修改设备配置参数 URL /api_2/devs 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 id Int 是 设备主键id Dev_Name str 是 设备名 Dev_ID str 是 网关的唯一ID Dev_Project str 否 设备所属项目 Gateway_ID str 否 网关ID Dev_Customer str 否 设备所属客户 返回参数 4.4删除设备 URL /api_2/devs 请求方法 DELETE 请求参数 参数名 类型 是否必须 参数说明 id str 是 主键,多个用’,’隔开 返回参数 4.5复制设备 URL /api_2/copy_devs 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Dev_ID str 是 设备ID Copy_Number int 是 生成数量 Prefix_Name str 是 前缀名 Suffix_Start_Number int 是 后缀起始值 返回参数 4.6设备批量派发 URL /api_2/distribute_devs 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Dev_ID str 是 网关唯一，多个用'，'隔开 Dev_Project str 是 设备所属项目 Dev_Customer str 否 设备所属客户 返回参数 4.7获取设备算子相关参数 URL /api_2/device_operator 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Dev_ID str 否 设备ID Page_Counts str 否 页码，默认0 Per_Page_Counts str 否 分页每页显示数，默认10 返回参数 参数名 类型 参数说明 Active_Operator_k str 总有功算子k Active_Operator_b str 总有功算子b Cum_Runtime_k str 累计运行时间算子k Cum_Runtime_b str 累计运行时间算子b Maintenance_Time str 本机总维保时间 PowerConsumption str 本机工频每小时耗电量 Share_Radio str 厂区分享比 Electricity_Fees str 厂区电费 Billing_Start_Time str 设备验收时间 Input_Time str 本机工频每小时耗电量输入时刻UTC Mutual_Inductance str 本机互感倍数 Motor_Power str 本机电机功率 4.8配置设备算子相关参数 URL /api_2/device_operator 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 Dev_ID str 是 网关唯一ID,多个用’,’隔开 Active_Operator_k str 是 总有功算子k Active_Operator_b str 是 总有功算子b Cum_Runtime_k str 是 累计运行时间算子k Cum_Runtime_b str 累计运行时间算子b Maintenance_Time str 本机总维保时间 PowerConsumption str 本机工频每小时耗电量 Share_Radio str 厂区分享比 Electricity_Fees str 厂区电费 Billing_Start_Time str 设备验收时间 Input_Time str 本机工频每小时耗电量输入时刻UTC Mutual_Inductance str 本机互感倍数 Motor_Power str 本机电机功率 返回参数 4.9获取网关信息 URL /api_2/gateways 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Per_Page_Counts str 否 分页每页显示数，默认10 Page_Counts str 否 页码，默认0 Search_Where str 否 模糊查询网关名 返回参数 参数名 类型 参数说明 id int 主键 Gateway_Name Str 网关名 Gateway_ID str 网关ID Gateway_State Str 网关状态 Dev_ID Str 绑定设备的ID Create_Time str 4.10修改网关信息 URL /api_2/gateways 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 id Int 是 主键id Gateway_Name str 是 网关名 Dev_ID str 否 绑定设备的ID 返回参数 5.设备测点接口 5.1添加设备测点 URL /api_2/measurePoints 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Dev_ID str 是 网关唯一ID Measure_Name str 是 测点名 MeasureDataFlow_Name str 是 数据流名称 Measure_Unit Str 否 设备单位 Measure_Type int 否 测点类型，0：网关上传；1：平台计算默认0 Measure_Formula str 否 计算公式,数据类型为1时有效 Data_Type str 数据类型 数据类型UINT32 Measure_LowerLimit int 否 测点数据下限值，默认为0 Measure_UpperLimit int 否 测点数据上限值，默认为0 Measure_Icon_Nomal str 是 图标的URL Measure_Icon_Overrun str 是 图标的URL,超限 Data_Type： 数据类型 字节数量 UINT32 4 Float32 4 UINT16 2 BOOL 1 INT16 2 返回参数 主键id 5.2获取设备测点配置 URL /api_2/measurePoints 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Dev_ID str 是 网关唯一ID Per_Page_Counts str 否 分页每页显示数，默认10 Page_Counts str 否 页码，默认0 Search_Where str 否 模糊查询测点名,数据流名称 返回参数 参数名 类型 参数说明 id Int 主键id Measure_Name str 测点名 MeasureDataFlow_Name str 数据流名称 Measure_Unit Str 设备单位 Measure_Type int 测点类型，0：网关上传；1：平台计算默认0 Measure_Formula str 计算公式,数据类型为1时有效 Data_Type str 数据类型UINT32 Measure_State str 测点状态,根据是否上传数据来定 Is_Unchanged int 1:系统测点,无法修改和删除 Measure_UpperLimit str Measure_LowerLimit str Measure_Icon_Nomal str 测点图标URL Measure_Icon_Overrun str 测点图标URL超限 5.3修改设备测点，修改单个 URL /api_2/measurePoints/ 请求方法 PUT 请求参数 参数名 类型 是否必须 参数说明 id int 是 主键 Measure_Name str 是 测点名 MeasureDataFlow_Name str 是 数据流名称 Measure_Unit Str 否 设备单位 Measure_Type int 否 测点类型，0：网关上传；1：平台计算默认0 Measure_Formula str 否 计算公式,数据类型为1时有效 Data_Type str 数据类型 数据类型UINT32 Measure_LowerLimit str 否 测点数据下限值，默认为空 Measure_UpperLimit str 否 测点数据上限值，默认为空 Measure_Icon_Nomal str 是 图标的URL Measure_Icon_Overrun str 是 图标的URL,超限 Dev_ID str 是 返回参数 5.4删除设备测点 URL /api_2/measurePoints 请求方法 DELETE 请求参数 参数名 类型 是否必须 参数说明 id str 是 主键id,多个用’,’隔开 Dev_ID str 是 返回参数 5.5导入设备测点（excel） URL /api_2/measurePoints_import 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Dev_ID str 是 MeasurePoints_Datas file 是 xlsx格式文件 返回参数 5.6获取所有图标资源 URL /api_2/icons 请求方法 GET 请求参数 参数名 类型 参数说明 Icon_Name str 图标名称 Icon_URL str 图标地址 Icon_Type str 图标类型，'1'表示蓝色，'0'表示红色 返回参数 6.设备数据接口 6.1获取设备数据实时信息 URL /api_2/measurePointsRT 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Dev_ID str 是 网关唯一ID Measure_Names str 否 显示测点表，默认所有测点数据，以逗号隔开 返回参数 参数名 类型 参数说明 Measure_Name str 测点名称 Measure_Data str 测点数据 Measure_Unit str 数据单位 Measure_Icon str 测点图标URL Timestamp str 数据时间 6.2获取设备历史记录数据 URL /api_2/devsdatas 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Start_Date str 否 默认当天0点，格式：\"2019-04-01 13:53:59\"，指定timestamp,id时无效 End_Date str 否 默认当前时间，格式：\"2019-04-01 13:53:59\"，指定timestamp,id时无效 Measure_Names str 否 显示测点表，默认所有测点数据，以逗号隔开 Order_By str 否 默认以TimeStamp排序 Order_Way str 否 ‘asc’,’desc’,默认asc Limits str 否 数据条数，默认所有 Dev_ID str 是 设备id Per_Page_Counts int 否 默认10 Page_Counts int 否 默认0代表所有 Timestamp str 否 指定单条数据，格式\"2019-04-01 13:53:59\" 返回参数 参数名 类型 参数说明 ...... str 测点1数据 ...... Str 测点2数据 Timestamp str 时间 6.3获取设备全天记录数据 URL /api_2/devsdaydatas 获取指定设备的记录 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Start_Date str 否 默认当天0点，格式：\"2019-04-01 00:00:00\"， End_Date str 否 默认当天24点，格式：\"2019-04-01 23:53:59\"， Measure_Names str 否 显示测点表，默认所有测点数据，以逗号隔开 Order_By str 否 默认以TimeStamp排序 Order_Way str 否 ‘asc’,’desc’,默认asc Dev_ID str 是 设备id 返回参数 参数名 类型 参数说明 ...... str 测点1数据 ...... Str 测点2数据 Timestamp str 时间 7.其他接口 7.1获取报警信息 URL /api_2/alarm_message 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Per_Page_Counts str 否 分页每页显示数，默认10 Page_Counts str 否 页码，默认0 Dev_Name str 否 筛选 Alarm_Type str 否 筛选 Alarm_Level str 否 筛选 State str 否 筛选 Order_Way str 否 ‘asc’:顺序,’desc’:倒序,默认desc 返回参数 参数名 类型 参数说明 id Int 主键 Dev_Name str 设备名称 Alarm_Type str 报警类型 Alarm_Content str 报警内容 Alarm_Level Str 报警级别 Alarm_Time str 报警时间 State str 状态:已处理/未处理 Handle_Person str 处理人员 Process_Mode str 处理方式 Process_Time Str 处理时间 Alarm_Code Str 报警码 Usr_Manager Str 所属客户经理 Customer_Name Str 所属客户 Submitter str 提交人(发送处理报警时的登录用户) 7.2处理报警 URL /api_2/alarm_process 请求方法 PUT 请求参数 参数名 类型 参数说明 id Int 主键 Handle_Person str 处理人员 Process_Mode str 处理方式 返回参数 7.3获取日志 URL /api_2/userlogs 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Per_Page_Counts str 否 分页每页显示数，默认10 Page_Counts str 否 页码，默认0 Start_Date str 否 默认当天0点，格式：\"2019-04-01 13:53:59\" End_Date str 否 默认当前时间，格式:\"2019-04-01 13:53:59\" Usr_Name str 否 筛选 Module str 否 筛选 Result str 否 筛选 Order_Way str 否 ‘asc’:顺序,’desc’:倒序,默认desc 返回参数 参数名 类型 参数说明 id Int Create_Time str 时间 Usr_Name str 用户名，可以为空 Module str 操作的模块，分为'用户'、'设备'、'测点'、'数据'、'数据库'，可以为空 Detail str 详细操作内容，可以为空 Result str 操作结果，共3种'成功'、'异常'、'告警'，不能为空 Message Str 结果说明 Module：用户、设备、客户、项目、测点、角色，报表、权限， Detail：修改，增加，删除，报表是导出， 如果是修改/增加/删除/测点，则需要把测点名称记录 如果是智能报表，需要记录导出了某个客户经理的报表 如果是详细报表，需要记录导出了某个客户的报表 如果是权限，需要记录修改了哪个用户的权限 Result：操作结果，'成功','异常' Message:具体后台返回的err_message内容 7.4获取省市关系 URL /api_2/province_city_list 请求方法 GET 请求参数 返回参数 参数名 类型 参数说明 Province_Name str 省名 City_List List [{“City_Name”:”常州市”}] 7.5获取报表信息 URL /api_2/reportForm 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Date_Type str 是 ‘1’-年，‘2’-月，‘3’-天 Start_Time Datetime 是 按天查,精确到小时;按月查,精确到天;看年查,精确到月 End_Time Datetime 是 Owner_Type str 是 user:客户, dev:设备 Owner_Name Str 是 多个用’,’相连,传’’表示所有 Province_Name Str 否 所属省,筛选(客户报表时有效) Usr_Manager Str 否 所属客户经理,筛选(客户报表时有效) Customer_Name Str 否 所属客户筛选(设备报表时有效) Per_Page_Counts Str 是 每页显示的条数 Page_Counts str 是 页数 返回参数 参数名 类型 参数说明 Owner_Name Str 客户或设备 Electricity_Save str 节电量 Electricity_Save_Fees str 节省电费 Online_Duration str 在线时长 Online_Account str 在线占比 Date_Time Str 数据时间 Usr_Manager Str 所属客户经理(客户报表时有) Customer_Name Str 所属客户(设备报表时有) Province_Name Str 省份(客户报表时有) 7.6报表导出 URL /api_2/reportForm_excel 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Date_Type str 是 ‘1’-年，‘2’-月，‘3’-天 Start_Time Datetime 是 按天查,精确到小时;按月查,精确到天;看年查,精确到月 End_Time Datetime 是 返回参数 7.7大屏主要数据配置 URL /api_2/ config_statistics_data 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Save_List str 是 Save_List:[ { ​ \"Data_Name\":\"历史装机总功率\", ​ \"Data_Amount\":\"12312\" }, { ​ \"Data_Name\":\"当前客户总数\", ​ \"Data_Amount\":\"1231\" }, { ​ \"Data_Name\":\"设备节能模式运行占比\", ​ \"Data_Amount\":\"1231\" }, { ​ \"Data_Name\":\"全国节电量基础值\", ​ \"Data_Amount\":\"1234\" } ] 返回参数** 7.8大屏主要数据配置 URL /api_2/ config_statistics_data 请求方法 GET 请求参数 返回参数 参数名 类型 是否必须 参数说明 Data_Name str 是 历史装机总功率/当前客户总数/设备节能模式运行占比 Data_Amount str 是 返回参数 7.9空压机参数配置 URL /api_2/air_compressor 请求方法 POST 请求参数 参数名 类型 是否必须 参数说明 Date_Type str 是 ‘2’-月，‘3’-天S Date_Time Datetime 是 日期 Save_List list 是 Save_List:[ { ​ \"Data_Name\":\"总节电量\", ​ \"Data_Amount\":\"\" }, { ​ \"Data_Name\":\"总流量\", ​ \"Data_Amount\":\"\" }, ] 返回参数 7.10空压机历史记录 URL /api_2/air_compressor 请求方法 GET 请求参数 参数名 类型 是否必须 参数说明 Date_Type str 是 ‘1’-年，‘2’-月 Start_Time Datetime 是 按月查,精确到天;看年查,精确到月 End_Time Datetime 是 Is_Show int 否 0:不显示空数据, 1:显示空数据(大屏使用), 默认0 返回参数 参数名 类型 参数说明 Data_Name str 数据名 Details str 数据值 {\"data\" :[{ ​ \"Data_Name\":\"总流量\", ​ \"details\": [{ ​ \"Date_Time\":\"2020-03-21 00:00:00\", ​ \"Data_Amount\":\"123123\" },{ ​ \"Date_Time\":'''2020-03-22 00:00:00\", ​ \"Data_Amount\":\"123123\" }, { ​ \"Data_Name\":\"总节电量\", ​ \"details\": [{ ​ \"Date_Time\":\"2020-03-21 00:00:00\", \"Data_Amount\":\"123123\" }, { \"Date_Time\":\"2020-03-22 00:00:00\", \"Data_Amount\":\"123123\" } ]} 附录Ⅰ 附录Ⅱ 附录Ⅲ 附录Ⅳ Copyright © lijiam 2019 all right reserved，powered by Gitbook本书发布时间： 2020-08-14 11:23:51 "}}